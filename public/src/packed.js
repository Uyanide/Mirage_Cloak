/*! For license information please see packed.js.LICENSE.txt */
(()=>{var t={321:function(t,e){var r,n;function i(){"use strict";i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:B(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",g="suspendedYield",v="executing",y="completed",m={};function _(){}function w(){}function b(){}var k={};f(k,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(U([])));x&&x!==r&&n.call(x,s)&&(k=x);var I=b.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var u=d(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function B(e,r,n){var i=p;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var u=d(e,r,n);if("normal"===u.type){if(i=n.done?y:g,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=y,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(c(e)+" is not iterable")}return w.prototype=b,o(I,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},C(L.prototype),f(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(h(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(I),f(I,l,"Generator"),f(I,s,(function(){return this})),f(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}"undefined"!=typeof self&&self,r=function(){var t=function(){return r=function t(){var e,r,n,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=function(){document.getElementById("innerContrastRange").value=i.contrast_inner,document.getElementById("coverContrastRange").value=i.contrast_cover,document.getElementById("innerLuminanceRange").value=i.luminance_inner,document.getElementById("coverLuminanceRange").value=i.luminance_cover,document.getElementById("isAddMarkCheckbox").checked=i.add_mark,document.getElementById("isEncodeCompressCheckbox").checked=i.encode_compress,document.getElementById("mirageSizeInput").value=i.mirage_size,document.getElementById("encodeMethodSelect").value=i.version.toString()},(r=s(r="setDefaultValues"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n},n=[{key:"loadDefaultArguments",value:(t=i().mark((function t(e){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((r=t.sent).ok){t.next=5;break}throw new Error("网络请求失败！");case 5:return t.next=7,r.json();case 7:n=t.sent,this.defaultPageId=n.defaultPageId,this.version=n.version,this.default_threshold=n.default_threshold,this.default_difference=n.default_difference,this.max_difference=n.max_difference,this.min_difference=n.min_difference,this.version_1=n.version_1,this.version_2=n.version_2,this.version_0=n.version_0,this.contrast_inner=n.contrast_inner,this.contrast_cover=n.contrast_cover,this.luminance_inner=n.luminance_inner,this.luminance_cover=n.luminance_cover,this.mirage_size=n.mirage_size,this.add_mark=n.add_mark,this.encode_compress=n.encode_compress,this.encode_compress_quality=n.encode_compress_quality,this.mark_path=n.mark_path,this.mark_ratio=n.mark_ratio;case 27:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,c,"next",t)}function c(t){o(a,n,i,s,c,"throw",t)}s(void 0)}))},function(t){return e.apply(this,arguments)})}],n&&a(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var t,e,r,n}();return t},void 0===(n=r.apply(e,[]))||(t.exports=n),errorHandling.scriptsLoaded.DefaultArguments=!0},248:function(t,e,r){var n,i,o;function a(){"use strict";a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,a=Object.create(o.prototype),s=new P(n||[]);return i(a,"_invoke",{value:B(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",g="suspendedYield",v="executing",y="completed",m={};function _(){}function w(){}function b(){}var k={};f(k,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(U([])));x&&x!==r&&n.call(x,s)&&(k=x);var I=b.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var c=d(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function B(e,r,n){var i=p;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var u=d(e,r,n);if("normal"===u.type){if(i=n.done?y:g,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=y,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},C(L.prototype),f(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(h(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(I),f(I,l,"Generator"),f(I,s,(function(){return this})),f(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function s(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,c,"next",t)}function c(t){s(o,n,i,a,c,"throw",t)}a(void 0)}))}}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}"undefined"!=typeof self&&self,i=[r(274),r(158),r(222),r(841),r(741),r(321)],void 0===(o="function"==typeof(n=function(t,e,r,n,i,o){errorHandling.userAgent=navigator.userAgent.toLowerCase(),applicationState.isOnPhone=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(errorHandling.userAgent),applicationState.isDownloadNotSupported=applicationState.isOnPhone&&/xiaomi|miui/i.test(errorHandling.userAgent),applicationState.isOnTiebaBrowser=/tieba/i.test(errorHandling.userAgent),document.addEventListener("DOMContentLoaded",c(a().mark((function s(){var c,u,l,f;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!applicationState.isOnTiebaBrowser){a.next=4;break}return document.body.innerHTML='<h1>请点击右上角<br>用浏览器打开</h1><img src="https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon1.png"></img>',a.abrupt("return");case 4:return applicationState.isDownloadNotSupported&&alert("由于浏览器限制，部分功能可能无法使用，建议使用其他浏览器或等待后续更新适配"),(c=document.getElementById("versionInfo"))&&(c.innerHTML="version: <b>".concat(applicationState.version,"</b>")),u=(u=document.getElementById("jsonPath").getAttribute("data-json-path"))+"?v="+applicationState.version,applicationState.defaultArguments=new o,a.next=12,applicationState.defaultArguments.loadDefaultArguments(u);case 12:applicationState.defaultArguments.setDefaultValues(),applicationState.currPageId=applicationState.defaultArguments.defaultPageId,CloakProcessor.CloakDecoder=new t(applicationState.defaultArguments,"decodeInputCanvas","decodeOutputCanvas"),CloakProcessor.CloakEncoder=new e(applicationState.defaultArguments,"innerCanvas","coverCanvas","hiddenCanvas","encodeOutputCanvas","encodeOutputSize","encodeHiddenSize"),i.setDiffHelper(applicationState.defaultArguments.version.toString()),applicationState.markImage=new Image,applicationState.markImage.crossOrigin="anonymous",applicationState.markImage.onload=function(){CloakProcessor.CloakEncoder.updateMarkImage(applicationState.markImage)},applicationState.markImage.onerror=function(t){console.error("无法加载水印图案: "+applicationState.defaultArguments.mark_path,t),alert("无法加载水印图案: "+applicationState.defaultArguments.mark_path+"\n"+t.message),CloakProcessor.CloakEncoder.updateMarkImage(null)},applicationState.markImage.src=applicationState.defaultArguments.mark_path,r.universalSetupEventListeners(),a.t0=applicationState.defaultArguments.defaultPageId,a.next="encodePage"===a.t0?26:"decodePage"===a.t0?33:40;break;case 26:return i.encodeSetUpEventListeners(),document.getElementById("decodePage").classList.add("displayNone"),document.getElementById("encodePage").classList.add("displayFlex"),document.getElementById("decodeButton").classList.add("backgroundNotSelected"),document.getElementById("encodeButton").classList.add("backgroundSecondary"),document.getElementById("decodeButton").addEventListener("click",r.switchPage),a.abrupt("break",40);case 33:return n.decodeSetupEventListeners(),document.getElementById("encodePage").classList.add("displayNone"),document.getElementById("decodePage").classList.add("displayFlex"),document.getElementById("encodeButton").classList.add("backgroundNotSelected"),document.getElementById("decodeButton").classList.add("backgroundSecondary"),document.getElementById("encodeButton").addEventListener("click",r.switchPage),a.abrupt("break",40);case 40:if(applicationState.isOnPhone)for(document.getElementById("decodePasteInput").classList.add("displayNone"),document.getElementById("decodeDragInputHint").classList.add("displayNone"),l=document.getElementsByClassName("encodeDrag"),f=0;f<l.length;f++)l[f].classList.add("displayNone");else document.getElementById("decodePasteButton").style.display="none";a.next=47;break;case 43:a.prev=43,a.t1=a.catch(0),console.error("Failed to initialize: "+a.t1),alert("初始化失败！"+a.t1);case 47:case"end":return a.stop()}}),s,null,[[0,43]])}))))})?n.apply(e,i):n)||(t.exports=o),errorHandling.scriptsLoaded.init=!0},563:function(t,e,r){var n=r(287).hp;("undefined"!=typeof self?self:this).JPEGEncoder=function(t){Math.round;var e,r,i,o,a,s=Math.floor,c=new Array(64),u=new Array(64),l=new Array(64),f=new Array(64),h=new Array(65535),d=new Array(65535),p=new Array(64),g=new Array(64),v=[],y=0,m=7,_=new Array(64),w=new Array(64),b=new Array(64),k=new Array(256),E=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(t,e){for(var r=0,n=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[e[n]]=[],i[e[n]][0]=r,i[e[n]][1]=o,n++,r++;r*=2}return i}function T(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(y|=1<<m),r--,--m<0&&(255==y?(j(255),j(0)):j(y),m=7,y=0)}function j(t){v.push(t)}function D(t){j(t>>8&255),j(255&t)}function R(t,e,r,n,i){for(var o,a=i[0],s=i[240],c=function(t,e){var r,n,i,o,a,s,c,u,l,f,h=0;for(l=0;l<8;++l){r=t[h],n=t[h+1],i=t[h+2],o=t[h+3],a=t[h+4],s=t[h+5],c=t[h+6];var d=r+(u=t[h+7]),g=r-u,v=n+c,y=n-c,m=i+s,_=i-s,w=o+a,b=o-a,k=d+w,E=d-w,x=v+m,I=v-m;t[h]=k+x,t[h+4]=k-x;var C=.707106781*(I+E);t[h+2]=E+C,t[h+6]=E-C;var L=.382683433*((k=b+_)-(I=y+g)),B=.5411961*k+L,A=1.306562965*I+L,S=.707106781*(x=_+y),O=g+S,P=g-S;t[h+5]=P+B,t[h+3]=P-B,t[h+1]=O+A,t[h+7]=O-A,h+=8}for(h=0,l=0;l<8;++l){r=t[h],n=t[h+8],i=t[h+16],o=t[h+24],a=t[h+32],s=t[h+40],c=t[h+48];var U=r+(u=t[h+56]),T=r-u,j=n+c,D=n-c,R=i+s,z=i-s,N=o+a,M=o-a,F=U+N,G=U-N,H=j+R,W=j-R;t[h]=F+H,t[h+32]=F-H;var Y=.707106781*(W+G);t[h+16]=G+Y,t[h+48]=G-Y;var $=.382683433*((F=M+z)-(W=D+T)),V=.5411961*F+$,K=1.306562965*W+$,q=.707106781*(H=z+D),X=T+q,J=T-q;t[h+40]=J+V,t[h+24]=J-V,t[h+8]=X+K,t[h+56]=X-K,h++}for(l=0;l<64;++l)f=t[l]*e[l],p[l]=f>0?f+.5|0:f-.5|0;return p}(t,e),u=0;u<64;++u)g[x[u]]=c[u];var l=g[0]-r;r=g[0],0==l?T(n[0]):(T(n[d[o=32767+l]]),T(h[o]));for(var f=63;f>0&&0==g[f];f--);if(0==f)return T(a),r;for(var v,y=1;y<=f;){for(var m=y;0==g[y]&&y<=f;++y);var _=y-m;if(_>=16){v=_>>4;for(var w=1;w<=v;++w)T(s);_&=15}o=32767+g[y],T(i[(_<<4)+d[o]]),T(h[o]),y++}return 63!=f&&T(a),r}function z(t){t<=0&&(t=1),t>100&&(t=100),a!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=s((e[r]*t+50)/100);n<1?n=1:n>255&&(n=255),c[x[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var a=s((i[o]*t+50)/100);a<1?a=1:a>255&&(a=255),u[x[o]]=a}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var g=0;g<8;g++)l[d]=1/(c[x[d]]*h[p]*h[g]*8),f[d]=1/(u[x[d]]*h[p]*h[g]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),a=t)}this.encode=function(t,a){var s;(new Date).getTime(),a&&z(a),v=new Array,y=0,m=7,D(65496),D(65504),D(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),D(1),D(1),j(0),j(0),void 0!==(s=t.comments)&&s.constructor===Array&&s.forEach((function(t){if("string"==typeof t){D(65534);var e,r=t.length;for(D(r+2),e=0;e<r;e++)j(t.charCodeAt(e))}})),function(t){if(t){D(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?D(t.length+2):(D(t.length+5+2),j(69),j(120),j(105),j(102),j(0));for(var e=0;e<t.length;e++)j(t[e])}}(t.exifBuffer),function(){D(65499),D(132),j(0);for(var t=0;t<64;t++)j(c[t]);j(1);for(var e=0;e<64;e++)j(u[e])}(),function(t,e){D(65472),D(17),j(8),D(e),D(t),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)}(t.width,t.height),function(){D(65476),D(418),j(0);for(var t=0;t<16;t++)j(I[t+1]);for(var e=0;e<=11;e++)j(C[e]);j(16);for(var r=0;r<16;r++)j(L[r+1]);for(var n=0;n<=161;n++)j(B[n]);j(1);for(var i=0;i<16;i++)j(A[i+1]);for(var o=0;o<=11;o++)j(S[o]);j(17);for(var a=0;a<16;a++)j(O[a+1]);for(var s=0;s<=161;s++)j(P[s])}(),D(65498),D(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var h=0,d=0,p=0;y=0,m=7,this.encode.displayName="_encode_";for(var g,k,x,U,N,M,F,G,H,W=t.data,Y=t.width,$=t.height,V=4*Y,K=0;K<$;){for(g=0;g<V;){for(M=N=V*K+g,F=-1,G=0,H=0;H<64;H++)M=N+(G=H>>3)*V+(F=4*(7&H)),K+G>=$&&(M-=V*(K+1+G-$)),g+F>=V&&(M-=g+F-V+4),k=W[M++],x=W[M++],U=W[M++],_[H]=(E[k]+E[x+256|0]+E[U+512|0]>>16)-128,w[H]=(E[k+768|0]+E[x+1024|0]+E[U+1280|0]>>16)-128,b[H]=(E[k+1280|0]+E[x+1536|0]+E[U+1792|0]>>16)-128;h=R(_,l,h,e,i),d=R(w,f,d,r,o),p=R(b,f,p,r,o),g+=32}K+=8}if(m>=0){var q=[];q[1]=m+1,q[0]=(1<<m+1)-1,T(q)}return D(65497),n.from(v)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)k[e]=t(e)}(),e=U(I,C),r=U(A,S),i=U(L,B),o=U(O,P),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var n=t;n<e;n++)d[32767+n]=r,h[32767+n]=[],h[32767+n][1]=r,h[32767+n][0]=n;for(var i=-(e-1);i<=-t;i++)d[32767+i]=r,h[32767+i]=[],h[32767+i][1]=r,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)E[t]=19595*t,E[t+256|0]=38470*t,E[t+512|0]=7471*t+32768,E[t+768|0]=-11059*t,E[t+1024|0]=-21709*t,E[t+1280|0]=32768*t+8421375,E[t+1536|0]=-27439*t,E[t+1792|0]=-5329*t}(),z(t),(new Date).getTime()},errorHandling.scriptsLoaded.jpegEncoder=!0},479:function(t,e,r){var n,i,o,a;function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e,r){return e=h(e),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,r||[],h(t).constructor):e.apply(t,r))}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function y(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}t=r.nmd(t),a=function(){return function(){"use strict";var t={620:function(){!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8";if("utf-8"!==t)throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('".concat(t,"') is invalid."))}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fatal:!1};if("utf-8"!==t)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('".concat(t,"') is invalid."));if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1}).stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");for(var e=0,r=t.length,n=0,i=Math.max(32,r+(r>>1)+7),o=new Uint8Array(i>>3<<3);e<r;){var a=t.charCodeAt(e++);if(a>=55296&&a<=56319){if(e<r){var s=t.charCodeAt(e);56320==(64512&s)&&(++e,a=((1023&a)<<10)+(1023&s)+65536)}if(a>=55296&&a<=56319)continue}if(n+4>o.length){i+=8,i=(i*=1+e/t.length*2)>>3<<3;var c=new Uint8Array(i);c.set(o),o=c}if(4294967168&a){if(4294965248&a)if(4294901760&a){if(4292870144&a)continue;o[n++]=a>>18&7|240,o[n++]=a>>12&63|128,o[n++]=a>>6&63|128}else o[n++]=a>>12&15|224,o[n++]=a>>6&63|128;else o[n++]=a>>6&31|192;o[n++]=63&a|128}else o[n++]=a}return o.slice(0,n)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1}).stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");for(var e=new Uint8Array(t),r=0,n=e.length,i=[];r<n;){var o=e[r++];if(0===o)break;if(128&o){if(192==(224&o)){var a=63&e[r++];i.push((31&o)<<6|a)}else if(224==(240&o)){var s=63&e[r++],c=63&e[r++];i.push((31&o)<<12|s<<6|c)}else if(240==(248&o)){var u=(7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u)}}else i.push(o)}return String.fromCharCode.apply(null,i)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};function i(t){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(t)}r.r(n),r.d(n,{getBlobFromImageData:function(){return un},getImageDataFromImageFile:function(){return cn}}),r(620);var o=new TextEncoder,a=function(){var t=new Uint8Array(4);return!((new Uint32Array(t.buffer)[0]=1)&t[0])}(),s={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},u=function(){return y((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t);var n=!1;"number"==typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);var i=r.offset?r.offset>>>0:0,o=e.byteLength-i,a=i;(ArrayBuffer.isView(e)||e instanceof t)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),this.lastWrittenByte=n?o:0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,o),this._mark=0,this._marks=[]}),[{key:"available",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+t<=this.length}},{key:"isLittleEndian",value:function(){return this.littleEndian}},{key:"setLittleEndian",value:function(){return this.littleEndian=!0,this}},{key:"isBigEndian",value:function(){return!this.littleEndian}},{key:"setBigEndian",value:function(){return this.littleEndian=!1,this}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=t,this}},{key:"back",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=t,this}},{key:"seek",value:function(t){return this.offset=t,this}},{key:"mark",value:function(){return this._mark=this.offset,this}},{key:"reset",value:function(){return this.offset=this._mark,this}},{key:"pushMark",value:function(){return this._marks.push(this.offset),this}},{key:"popMark",value:function(){var t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}},{key:"rewind",value:function(){return this.offset=0,this}},{key:"ensureAvailable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(t)){var e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}},{key:"readBoolean",value:function(){return 0!==this.readUint8()}},{key:"readInt8",value:function(){return this._data.getInt8(this.offset++)}},{key:"readUint8",value:function(){return this._data.getUint8(this.offset++)}},{key:"readByte",value:function(){return this.readUint8()}},{key:"readBytes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(t,"uint8")}},{key:"readArray",value:function(t,e){var r=s[e].BYTES_PER_ELEMENT*t,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+r);if(this.littleEndian===a&&"uint8"!==e&&"int8"!==e){var o=new Uint8Array(this.buffer.slice(n,n+r));o.reverse();var c=new s[e](o.buffer);return this.offset+=r,c.reverse(),c}var u=new s[e](i);return this.offset+=r,u}},{key:"readInt16",value:function(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readUint16",value:function(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readInt32",value:function(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readUint32",value:function(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat32",value:function(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat64",value:function(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readBigInt64",value:function(){var t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readBigUint64",value:function(){var t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readChar",value:function(){return String.fromCharCode(this.readInt8())}},{key:"readChars",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="",r=0;r<t;r++)e+=this.readChar();return e}},{key:"readUtf8",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i(this.readBytes(t))}},{key:"decodeText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return i(this.readBytes(t),e)}},{key:"writeBoolean",value:function(t){return this.writeUint8(t?255:0),this}},{key:"writeInt8",value:function(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeUint8",value:function(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeByte",value:function(t){return this.writeUint8(t)}},{key:"writeBytes",value:function(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}},{key:"writeInt16",value:function(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeUint16",value:function(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeInt32",value:function(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeUint32",value:function(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat32",value:function(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat64",value:function(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeBigInt64",value:function(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeBigUint64",value:function(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeChar",value:function(t){return this.writeUint8(t.charCodeAt(0))}},{key:"writeChars",value:function(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}},{key:"writeUtf8",value:function(t){return this.writeBytes(function(t){return o.encode(t)}(t))}},{key:"toArray",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}},{key:"_updateLastWrittenByte",value:function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}])}();function f(t){for(var e=t.length;--e>=0;)t[e]=0}var h=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),p=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),v=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),m=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=new Array(576);f(w);var b=new Array(60);f(b);var k=new Array(512);f(k);var E=new Array(256);f(E);var x=new Array(29);f(x);var I,C,L,B=new Array(30);function A(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}f(B);var O=function(t){return t<256?k[t]:k[256+(t>>>7)]},P=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},U=function(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},T=function(t,e,r){U(t,r[2*e],r[2*e+1])},j=function(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},D=function(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)a=a+r[n-1]<<1,o[n]=a;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=j(o[s]++,s))}},R=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},z=function(t){t.bi_valid>8?P(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},N=function(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},M=function(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&N(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!N(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},F=function(t,e,r){var n,i,o,a,s=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+s++],n+=(255&t.pending_buf[t.sym_buf+s++])<<8,i=t.pending_buf[t.sym_buf+s++],0===n?T(t,i,e):(o=E[i],T(t,o+256+1,e),0!==(a=h[o])&&(i-=x[o],U(t,i,a)),n--,o=O(n),T(t,o,r),0!==(a=p[o])&&(n-=B[o],U(t,n,a)))}while(s<t.sym_next);T(t,256,e)},G=function(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<c;r++)0!==o[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,r=t.heap_len>>1;r>=1;r--)M(t,o,r);i=c;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,M(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,c=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=c[2*c[2*(n=t.heap[r])+1]+1]+1)>p&&(o=p,g++),c[2*n+1]=o,n>u||(t.bl_count[o]++,a=0,n>=d&&(a=h[n-d]),s=c[2*n],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(l[2*n+1]+a)));if(0!==g){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>u||(c[2*i+1]!==o&&(t.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),n--)}}(t,e),D(o,u,t.bl_count)},H=function(t,e,r){var n,i,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<c&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))},W=function(t,e,r){var n,i,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<c&&i===a)){if(s<u)do{T(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(T(t,i,t.bl_tree),s--),T(t,16,t.bl_tree),U(t,s-3,2)):s<=10?(T(t,17,t.bl_tree),U(t,s-3,3)):(T(t,18,t.bl_tree),U(t,s-11,7));s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}},Y=!1,$=function(t,e,r,n){U(t,0+(n?1:0),3),z(t),P(t,r),P(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},V=$,K=function(t,e,r,n){for(var i=65535&t,o=t>>>16&65535,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16},q=new Uint32Array(function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}()),X=function(t,e,r,n){var i=q,o=n+r;t^=-1;for(var a=n;a<o;a++)t=t>>>8^i[255&(t^e[a])];return~t},J={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Q=0,Z=2,tt=3,et=4,rt=5,nt=6,it=0,ot=1,at=2,st=-2,ct=-3,ut=-4,lt=-5,ft=-1,ht=0,dt=8,pt=function(t){Y||(function(){var t,e,r,n,i,o=new Array(16);for(r=0,n=0;n<28;n++)for(x[n]=r,t=0;t<1<<h[n];t++)E[r++]=n;for(E[r-1]=n,i=0,n=0;n<16;n++)for(B[n]=i,t=0;t<1<<p[n];t++)k[i++]=n;for(i>>=7;n<30;n++)for(B[n]=i<<7,t=0;t<1<<p[n]-7;t++)k[256+i++]=n;for(e=0;e<=15;e++)o[e]=0;for(t=0;t<=143;)w[2*t+1]=8,t++,o[8]++;for(;t<=255;)w[2*t+1]=9,t++,o[9]++;for(;t<=279;)w[2*t+1]=7,t++,o[7]++;for(;t<=287;)w[2*t+1]=8,t++,o[8]++;for(D(w,287,o),t=0;t<30;t++)b[2*t+1]=5,b[2*t]=j(t,5);I=new A(w,h,257,286,15),C=new A(b,p,0,30,15),L=new A(new Array(0),v,0,19,7)}(),Y=!0),t.l_desc=new S(t.dyn_ltree,I),t.d_desc=new S(t.dyn_dtree,C),t.bl_desc=new S(t.bl_tree,L),t.bi_buf=0,t.bi_valid=0,R(t)},gt=V,vt=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),G(t,t.l_desc),G(t,t.d_desc),a=function(t){var e;for(H(t,t.dyn_ltree,t.l_desc.max_code),H(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*m[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?$(t,e,r,n):4===t.strategy||o===i?(U(t,2+(n?1:0),3),F(t,w,b)):(U(t,4+(n?1:0),3),function(t,e,r,n){var i;for(U(t,e-257,5),U(t,r-1,5),U(t,n-4,4),i=0;i<n;i++)U(t,t.bl_tree[2*m[i]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),F(t,t.dyn_ltree,t.dyn_dtree)),R(t),n&&z(t)},yt=function(t,e,r){return t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(E[r]+256+1)]++,t.dyn_dtree[2*O(e)]++),t.sym_next===t.sym_end},mt=function(t){U(t,2,3),T(t,256,w),function(t){16===t.bi_valid?(P(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},_t=Q,wt=1,bt=tt,kt=et,Et=rt,xt=it,It=ot,Ct=st,Lt=ct,Bt=lt,At=ft,St=1,Ot=2,Pt=3,Ut=4,Tt=ht,jt=2,Dt=dt,Rt=258,zt=262,Nt=42,Mt=113,Ft=666,Gt=function(t,e){return t.msg=J[e],e},Ht=function(t){return 2*t-(t>4?9:0)},Wt=function(t){for(var e=t.length;--e>=0;)t[e]=0},Yt=function(t){var e,r,n,i=t.w_size;n=e=t.hash_size;do{r=t.head[--n],t.head[n]=r>=i?r-i:0}while(--e);n=e=i;do{r=t.prev[--n],t.prev[n]=r>=i?r-i:0}while(--e)},$t=function(t,e,r){return(e<<t.hash_shift^r)&t.hash_mask},Vt=function(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Kt=function(t,e){vt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Vt(t.strm)},qt=function(t,e){t.pending_buf[t.pending++]=e},Xt=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Jt=function(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=K(t.adler,e,i,r):2===t.state.wrap&&(t.adler=X(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},Qt=function(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-zt?t.strstart-(t.w_size-zt):0,u=t.window,l=t.w_mask,f=t.prev,h=t.strstart+Rt,d=u[o+a-1],p=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h);if(n=Rt-(h-o),o=h-Rt,n>a){if(t.match_start=e,a=n,n>=s)break;d=u[o+a-1],p=u[o+a]}}}while((e=f[e&l])>c&&0!=--i);return a<=t.lookahead?a:t.lookahead},Zt=function(t){var e,r,n,i=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-zt)&&(t.window.set(t.window.subarray(i,i+i-r),0),t.match_start-=i,t.strstart-=i,t.block_start-=i,t.insert>t.strstart&&(t.insert=t.strstart),Yt(t),r+=i),0===t.strm.avail_in)break;if(e=Jt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=e,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=$t(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=$t(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<zt&&0!==t.strm.avail_in)},te=function(t,e){var r,n,i,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,s=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r>(n=t.strstart-t.block_start)+t.strm.avail_in&&(r=n+t.strm.avail_in),r>i&&(r=i),r<o&&(0===r&&e!==kt||e===_t||r!==n+t.strm.avail_in))break;a=e===kt&&r===n+t.strm.avail_in?1:0,gt(t,0,0,a),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Vt(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(Jt(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===a);return(s-=t.strm.avail_in)&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==_t&&e!==kt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(Jt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,o=(i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i)>t.w_size?t.w_size:i,((n=t.strstart-t.block_start)>=o||(n||e===kt)&&e!==_t&&0===t.strm.avail_in&&n<=i)&&(r=n>i?i:n,a=e===kt&&0===t.strm.avail_in&&r===n?1:0,gt(t,t.block_start,r,a),t.block_start+=r,Vt(t.strm)),a?3:1)},ee=function(t,e){for(var r,n;;){if(t.lookahead<zt){if(Zt(t),t.lookahead<zt&&e===_t)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=$t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-zt&&(t.match_length=Qt(t,r)),t.match_length>=3)if(n=yt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=$t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=$t(t,t.ins_h,t.window[t.strstart+1]);else n=yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Kt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===kt?(Kt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Kt(t,!1),0===t.strm.avail_out)?1:2},re=function(t,e){for(var r,n,i;;){if(t.lookahead<zt){if(Zt(t),t.lookahead<zt&&e===_t)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=$t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-zt&&(t.match_length=Qt(t,r),t.match_length<=5&&(t.strategy===St||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=yt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=$t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Kt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=yt(t,0,t.window[t.strstart-1]))&&Kt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=yt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===kt?(Kt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Kt(t,!1),0===t.strm.avail_out)?1:2};function ne(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var ie=[new ne(0,0,0,0,te),new ne(4,4,8,4,ee),new ne(4,5,16,8,ee),new ne(4,6,32,32,ee),new ne(4,4,16,16,re),new ne(8,16,32,32,re),new ne(8,16,128,128,re),new ne(8,32,128,256,re),new ne(32,128,258,1024,re),new ne(32,258,258,4096,re)];function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Dt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Wt(this.dyn_ltree),Wt(this.dyn_dtree),Wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Wt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ae=function(t){if(!t)return 1;var e=t.state;return!e||e.strm!==t||e.status!==Nt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Mt&&e.status!==Ft?1:0},se=function(t){if(ae(t))return Gt(t,Ct);t.total_in=t.total_out=0,t.data_type=jt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Nt:Mt,t.adler=2===e.wrap?0:1,e.last_flush=-2,pt(e),xt},ce=function(t){var e,r=se(t);return r===xt&&((e=t.state).window_size=2*e.w_size,Wt(e.head),e.max_lazy_match=ie[e.level].max_lazy,e.good_match=ie[e.level].good_length,e.nice_match=ie[e.level].nice_length,e.max_chain_length=ie[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r},ue=function(t,e,r,n,i,o){if(!t)return Ct;var a=1;if(e===At&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==Dt||n<8||n>15||e<0||e>9||o<0||o>Ut||8===n&&1!==a)return Gt(t,Ct);8===n&&(n=9);var s=new oe;return t.state=s,s.strm=t,s.status=Nt,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=o,s.method=r,ce(t)},le={deflateInit:function(t,e){return ue(t,e,Dt,15,8,Tt)},deflateInit2:ue,deflateReset:ce,deflateResetKeep:se,deflateSetHeader:function(t,e){return ae(t)||2!==t.state.wrap?Ct:(t.state.gzhead=e,xt)},deflate:function(t,e){if(ae(t)||e>Et||e<0)return t?Gt(t,Ct):Ct;var r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===Ft&&e!==kt)return Gt(t,0===t.avail_out?Bt:Ct);var n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(Vt(t),0===t.avail_out)return r.last_flush=-1,xt}else if(0===t.avail_in&&Ht(e)<=Ht(n)&&e!==kt)return Gt(t,Bt);if(r.status===Ft&&0!==t.avail_in)return Gt(t,Bt);if(r.status===Nt&&0===r.wrap&&(r.status=Mt),r.status===Nt){var i=Dt+(r.w_bits-8<<4)<<8;if(i|=(r.strategy>=Ot||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(i|=32),Xt(r,i+=31-i%31),0!==r.strstart&&(Xt(r,t.adler>>>16),Xt(r,65535&t.adler)),t.adler=1,r.status=Mt,Vt(t),0!==r.pending)return r.last_flush=-1,xt}if(57===r.status)if(t.adler=0,qt(r,31),qt(r,139),qt(r,8),r.gzhead)qt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),qt(r,255&r.gzhead.time),qt(r,r.gzhead.time>>8&255),qt(r,r.gzhead.time>>16&255),qt(r,r.gzhead.time>>24&255),qt(r,9===r.level?2:r.strategy>=Ot||r.level<2?4:0),qt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(qt(r,255&r.gzhead.extra.length),qt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=X(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(qt(r,0),qt(r,0),qt(r,0),qt(r,0),qt(r,0),qt(r,9===r.level?2:r.strategy>=Ot||r.level<2?4:0),qt(r,3),r.status=Mt,Vt(t),0!==r.pending)return r.last_flush=-1,xt;if(69===r.status){if(r.gzhead.extra){for(var o=r.pending,a=(65535&r.gzhead.extra.length)-r.gzindex;r.pending+a>r.pending_buf_size;){var s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(t.adler=X(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=s,Vt(t),0!==r.pending)return r.last_flush=-1,xt;o=0,a-=s}var c=new Uint8Array(r.gzhead.extra);r.pending_buf.set(c.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending+=a,r.gzhead.hcrc&&r.pending>o&&(t.adler=X(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){var u,l=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>l&&(t.adler=X(t.adler,r.pending_buf,r.pending-l,l)),Vt(t),0!==r.pending)return r.last_flush=-1,xt;l=0}u=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,qt(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>l&&(t.adler=X(t.adler,r.pending_buf,r.pending-l,l)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){var f,h=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>h&&(t.adler=X(t.adler,r.pending_buf,r.pending-h,h)),Vt(t),0!==r.pending)return r.last_flush=-1,xt;h=0}f=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,qt(r,f)}while(0!==f);r.gzhead.hcrc&&r.pending>h&&(t.adler=X(t.adler,r.pending_buf,r.pending-h,h))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Vt(t),0!==r.pending))return r.last_flush=-1,xt;qt(r,255&t.adler),qt(r,t.adler>>8&255),t.adler=0}if(r.status=Mt,Vt(t),0!==r.pending)return r.last_flush=-1,xt}if(0!==t.avail_in||0!==r.lookahead||e!==_t&&r.status!==Ft){var d=0===r.level?te(r,e):r.strategy===Ot?function(t,e){for(var r;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===_t)return 1;break}if(t.match_length=0,r=yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Kt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===kt?(Kt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Kt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===Pt?function(t,e){for(var r,n,i,o,a=t.window;;){if(t.lookahead<=Rt){if(Zt(t),t.lookahead<=Rt&&e===_t)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=t.strstart+Rt;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=Rt-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=yt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Kt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===kt?(Kt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Kt(t,!1),0===t.strm.avail_out)?1:2}(r,e):ie[r.level].func(r,e);if(3!==d&&4!==d||(r.status=Ft),1===d||3===d)return 0===t.avail_out&&(r.last_flush=-1),xt;if(2===d&&(e===wt?mt(r):e!==Et&&(gt(r,0,0,!1),e===bt&&(Wt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Vt(t),0===t.avail_out))return r.last_flush=-1,xt}return e!==kt?xt:r.wrap<=0?It:(2===r.wrap?(qt(r,255&t.adler),qt(r,t.adler>>8&255),qt(r,t.adler>>16&255),qt(r,t.adler>>24&255),qt(r,255&t.total_in),qt(r,t.total_in>>8&255),qt(r,t.total_in>>16&255),qt(r,t.total_in>>24&255)):(Xt(r,t.adler>>>16),Xt(r,65535&t.adler)),Vt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?xt:It)},deflateEnd:function(t){if(ae(t))return Ct;var e=t.state.status;return t.state=null,e===Mt?Gt(t,Lt):xt},deflateSetDictionary:function(t,e){var r=e.length;if(ae(t))return Ct;var n=t.state,i=n.wrap;if(2===i||1===i&&n.status!==Nt||n.lookahead)return Ct;if(1===i&&(t.adler=K(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Wt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var o=new Uint8Array(n.w_size);o.set(e.subarray(r-n.w_size,r),0),e=o,r=n.w_size}var a=t.avail_in,s=t.next_in,c=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var u=n.strstart,l=n.lookahead-2;do{n.ins_h=$t(n,n.ins_h,n.window[u+3-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++}while(--l);n.strstart=u,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=c,t.avail_in=a,n.wrap=i,xt},deflateInfo:"pako deflate (from Nodeca project)"},fe=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},he={assign:function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=_(r))throw new TypeError(r+"must be non-object");for(var n in r)fe(r,n)&&(t[n]=r[n])}}return t},flattenChunks:function(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r].length;for(var i=new Uint8Array(e),o=0,a=0,s=t.length;o<s;o++){var c=t[o];i.set(c,a),a+=c.length}return i}},de=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){de=!1}for(var pe=new Uint8Array(256),ge=0;ge<256;ge++)pe[ge]=ge>=252?6:ge>=248?5:ge>=240?4:ge>=224?3:ge>=192?2:1;pe[254]=pe[254]=1;var ve={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,r,n,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(s),o=0,i=0;o<s;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},buf2string:function(t,e){var r,n,i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));var o=new Array(2*i);for(n=0,r=0;r<i;){var a=t[r++];if(a<128)o[n++]=a;else{var s=pe[a];if(s>4)o[n++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&r<i;)a=a<<6|63&t[r++],s--;s>1?o[n++]=65533:a<65536?o[n++]=a:(a-=65536,o[n++]=55296|a>>10&1023,o[n++]=56320|1023&a)}}}return function(t,e){if(e<65534&&t.subarray&&de)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}(o,n)},utf8border:function(t,e){(e=e||t.length)>t.length&&(e=t.length);for(var r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+pe[t[r]]>e?r:e}},ye=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},me=Object.prototype.toString,_e=Q,we=Z,be=tt,ke=et,Ee=it,xe=ot,Ie=ft,Ce=ht,Le=dt;function Be(t){this.options=he.assign({level:Ie,method:Le,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ce},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ye,this.strm.avail_out=0;var r=le.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Ee)throw new Error(J[r]);if(e.header&&le.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?ve.string2buf(e.dictionary):"[object ArrayBuffer]"===me.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=le.deflateSetDictionary(this.strm,n))!==Ee)throw new Error(J[r]);this._dict_set=!0}}Be.prototype.push=function(t,e){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?ke:_e,"string"==typeof t?i.input=ve.string2buf(t):"[object ArrayBuffer]"===me.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n===we||n===be)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((r=le.deflate(i,n))===xe)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=le.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ee;if(0!==i.avail_out){if(n>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},Be.prototype.onData=function(t){this.chunks.push(t)},Be.prototype.onEnd=function(t){t===Ee&&(this.result=he.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ae=function(t,e){var r=new Be(e);if(r.push(t,!0),r.err)throw r.msg||J[r.err];return r.result},Se=16209,Oe=function(t,e){var r,n,i,o,a,s,c,u,l,f,h,d,p,g,v,y,m,_,w,b,k,E,x,I,C=t.state;r=t.next_in,x=t.input,n=r+(t.avail_in-5),i=t.next_out,I=t.output,o=i-(e-t.avail_out),a=i+(t.avail_out-257),s=C.dmax,c=C.wsize,u=C.whave,l=C.wnext,f=C.window,h=C.hold,d=C.bits,p=C.lencode,g=C.distcode,v=(1<<C.lenbits)-1,y=(1<<C.distbits)-1;t:do{d<15&&(h+=x[r++]<<d,d+=8,h+=x[r++]<<d,d+=8),m=p[h&v];e:for(;;){if(h>>>=_=m>>>24,d-=_,0==(_=m>>>16&255))I[i++]=65535&m;else{if(!(16&_)){if(64&_){if(32&_){C.mode=16191;break t}t.msg="invalid literal/length code",C.mode=Se;break t}m=p[(65535&m)+(h&(1<<_)-1)];continue e}for(w=65535&m,(_&=15)&&(d<_&&(h+=x[r++]<<d,d+=8),w+=h&(1<<_)-1,h>>>=_,d-=_),d<15&&(h+=x[r++]<<d,d+=8,h+=x[r++]<<d,d+=8),m=g[h&y];;){if(h>>>=_=m>>>24,d-=_,16&(_=m>>>16&255)){if(b=65535&m,d<(_&=15)&&(h+=x[r++]<<d,(d+=8)<_&&(h+=x[r++]<<d,d+=8)),(b+=h&(1<<_)-1)>s){t.msg="invalid distance too far back",C.mode=Se;break t}if(h>>>=_,d-=_,b>(_=i-o)){if((_=b-_)>u&&C.sane){t.msg="invalid distance too far back",C.mode=Se;break t}if(k=0,E=f,0===l){if(k+=c-_,_<w){w-=_;do{I[i++]=f[k++]}while(--_);k=i-b,E=I}}else if(l<_){if(k+=c+l-_,(_-=l)<w){w-=_;do{I[i++]=f[k++]}while(--_);if(k=0,l<w){w-=_=l;do{I[i++]=f[k++]}while(--_);k=i-b,E=I}}}else if(k+=l-_,_<w){w-=_;do{I[i++]=f[k++]}while(--_);k=i-b,E=I}for(;w>2;)I[i++]=E[k++],I[i++]=E[k++],I[i++]=E[k++],w-=3;w&&(I[i++]=E[k++],w>1&&(I[i++]=E[k++]))}else{k=i-b;do{I[i++]=I[k++],I[i++]=I[k++],I[i++]=I[k++],w-=3}while(w>2);w&&(I[i++]=I[k++],w>1&&(I[i++]=I[k++]))}break}if(64&_){t.msg="invalid distance code",C.mode=Se;break t}m=g[(65535&m)+(h&(1<<_)-1)]}}break}}while(r<n&&i<a);r-=w=d>>3,h&=(1<<(d-=w<<3))-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<a?a-i+257:257-(i-a),C.hold=h,C.bits=d},Pe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ue=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Te=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),je=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),De=function(t,e,r,n,i,o,a,s){var c,u,l,f,h,d,p,g,v,y=s.bits,m=0,_=0,w=0,b=0,k=0,E=0,x=0,I=0,C=0,L=0,B=null,A=new Uint16Array(16),S=new Uint16Array(16),O=null;for(m=0;m<=15;m++)A[m]=0;for(_=0;_<n;_++)A[e[r+_]]++;for(k=y,b=15;b>=1&&0===A[b];b--);if(k>b&&(k=b),0===b)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(w=1;w<b&&0===A[w];w++);for(k<w&&(k=w),I=1,m=1;m<=15;m++)if(I<<=1,(I-=A[m])<0)return-1;if(I>0&&(0===t||1!==b))return-1;for(S[1]=0,m=1;m<15;m++)S[m+1]=S[m]+A[m];for(_=0;_<n;_++)0!==e[r+_]&&(a[S[e[r+_]]++]=_);if(0===t?(B=O=a,d=20):1===t?(B=Pe,O=Ue,d=257):(B=Te,O=je,d=0),L=0,_=0,m=w,h=o,E=k,x=0,l=-1,f=(C=1<<k)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){p=m-x,a[_]+1<d?(g=0,v=a[_]):a[_]>=d?(g=O[a[_]-d],v=B[a[_]-d]):(g=96,v=0),c=1<<m-x,w=u=1<<E;do{i[h+(L>>x)+(u-=c)]=p<<24|g<<16|v}while(0!==u);for(c=1<<m-1;L&c;)c>>=1;if(0!==c?(L&=c-1,L+=c):L=0,_++,0==--A[m]){if(m===b)break;m=e[r+a[_]]}if(m>k&&(L&f)!==l){for(0===x&&(x=k),h+=w,I=1<<(E=m-x);E+x<b&&!((I-=A[E+x])<=0);)E++,I<<=1;if(C+=1<<E,1===t&&C>852||2===t&&C>592)return 1;i[l=L&f]=k<<24|E<<16|h-o}}return 0!==L&&(i[h+L]=m-x<<24|64<<16),s.bits=k,0},Re=et,ze=rt,Ne=nt,Me=it,Fe=ot,Ge=at,He=st,We=ct,Ye=ut,$e=lt,Ve=dt,Ke=16180,qe=16190,Xe=16191,Je=16192,Qe=16194,Ze=16199,tr=16200,er=16206,rr=16209,nr=function(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)};function ir(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var or,ar,sr=function(t){if(!t)return 1;var e=t.state;return!e||e.strm!==t||e.mode<Ke||e.mode>16211?1:0},cr=function(t){if(sr(t))return He;var e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ke,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Me},ur=function(t){if(sr(t))return He;var e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,cr(t)},lr=function(t,e){var r;if(sr(t))return He;var n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?He:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,ur(t))},fr=function(t,e){if(!t)return He;var r=new ir;t.state=r,r.strm=t,r.window=null,r.mode=Ke;var n=lr(t,e);return n!==Me&&(t.state=null),n},hr=!0,dr=function(t){if(hr){or=new Int32Array(512),ar=new Int32Array(32);for(var e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(De(1,t.lens,0,288,or,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;De(2,t.lens,0,32,ar,0,t.work,{bits:5}),hr=!1}t.lencode=or,t.lenbits=9,t.distcode=ar,t.distbits=5},pr=function(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},gr={inflateReset:ur,inflateReset2:lr,inflateResetKeep:cr,inflateInit:function(t){return fr(t,15)},inflateInit2:fr,inflate:function(t,e){var r,n,i,o,a,s,c,u,l,f,h,d,p,g,v,y,m,_,w,b,k,E,x,I,C=0,L=new Uint8Array(4),B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sr(t)||!t.output||!t.input&&0!==t.avail_in)return He;(r=t.state).mode===Xe&&(r.mode=Je),a=t.next_out,i=t.output,c=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,l=r.bits,f=s,h=c,E=Me;t:for(;;)switch(r.mode){case Ke:if(0===r.wrap){r.mode=Je;break}for(;l<16;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,L[0]=255&u,L[1]=u>>>8&255,r.check=X(r.check,L,2,0),u=0,l=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=rr;break}if((15&u)!==Ve){t.msg="unknown compression method",r.mode=rr;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits&&(r.wbits=k),k>15||k>r.wbits){t.msg="invalid window size",r.mode=rr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&u?16189:Xe,u=0,l=0;break;case 16181:for(;l<16;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==Ve){t.msg="unknown compression method",r.mode=rr;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=rr;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(L[0]=255&u,L[1]=u>>>8&255,r.check=X(r.check,L,2,0)),u=0,l=0,r.mode=16182;case 16182:for(;l<32;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(L[0]=255&u,L[1]=u>>>8&255,L[2]=u>>>16&255,L[3]=u>>>24&255,r.check=X(r.check,L,4,0)),u=0,l=0,r.mode=16183;case 16183:for(;l<16;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(L[0]=255&u,L[1]=u>>>8&255,r.check=X(r.check,L,2,0)),u=0,l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;l<16;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(L[0]=255&u,L[1]=u>>>8&255,r.check=X(r.check,L,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+d),k)),512&r.flags&&4&r.wrap&&(r.check=X(r.check,n,d,o)),s-=d,o+=d,r.length-=d),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break t;d=0;do{k=n[o+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&d<s);if(512&r.flags&&4&r.wrap&&(r.check=X(r.check,n,d,o)),s-=d,o+=d,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break t;d=0;do{k=n[o+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&d<s);if(512&r.flags&&4&r.wrap&&(r.check=X(r.check,n,d,o)),s-=d,o+=d,k)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;l<16;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(4&r.wrap&&u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=rr;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Xe;break;case 16189:for(;l<32;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}t.adler=r.check=nr(u),u=0,l=0,r.mode=qe;case qe:if(0===r.havedict)return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=l,Ge;t.adler=r.check=1,r.mode=Xe;case Xe:if(e===ze||e===Ne)break t;case Je:if(r.last){u>>>=7&l,l-=7&l,r.mode=er;break}for(;l<3;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=16193;break;case 1:if(dr(r),r.mode=Ze,e===Ne){u>>>=2,l-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=rr}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=rr;break}if(r.length=65535&u,u=0,l=0,r.mode=Qe,e===Ne)break t;case Qe:r.mode=16195;case 16195:if(d=r.length){if(d>s&&(d=s),d>c&&(d=c),0===d)break t;i.set(n.subarray(o,o+d),a),s-=d,o+=d,c-=d,a+=d,r.length-=d;break}r.mode=Xe;break;case 16196:for(;l<14;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=rr;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.lens[B[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},E=De(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,E){t.msg="invalid code lengths set",r.mode=rr;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;y=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,m=65535&C,!((v=C>>>24)<=l);){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(m<16)u>>>=v,l-=v,r.lens[r.have++]=m;else{if(16===m){for(I=v+2;l<I;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(u>>>=v,l-=v,0===r.have){t.msg="invalid bit length repeat",r.mode=rr;break}k=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===m){for(I=v+3;l<I;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}l-=v,k=0,d=3+(7&(u>>>=v)),u>>>=3,l-=3}else{for(I=v+7;l<I;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}l-=v,k=0,d=11+(127&(u>>>=v)),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=rr;break}for(;d--;)r.lens[r.have++]=k}}if(r.mode===rr)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=rr;break}if(r.lenbits=9,x={bits:r.lenbits},E=De(1,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,E){t.msg="invalid literal/lengths set",r.mode=rr;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},E=De(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,E){t.msg="invalid distances set",r.mode=rr;break}if(r.mode=Ze,e===Ne)break t;case Ze:r.mode=tr;case tr:if(s>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=l,Oe(t,h),a=t.next_out,i=t.output,c=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,l=r.bits,r.mode===Xe&&(r.back=-1);break}for(r.back=0;y=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,m=65535&C,!((v=C>>>24)<=l);){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(y&&!(240&y)){for(_=v,w=y,b=m;y=(C=r.lencode[b+((u&(1<<_+w)-1)>>_)])>>>16&255,m=65535&C,!(_+(v=C>>>24)<=l);){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}u>>>=_,l-=_,r.back+=_}if(u>>>=v,l-=v,r.back+=v,r.length=m,0===y){r.mode=16205;break}if(32&y){r.back=-1,r.mode=Xe;break}if(64&y){t.msg="invalid literal/length code",r.mode=rr;break}r.extra=15&y,r.mode=16201;case 16201:if(r.extra){for(I=r.extra;l<I;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;y=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,m=65535&C,!((v=C>>>24)<=l);){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(!(240&y)){for(_=v,w=y,b=m;y=(C=r.distcode[b+((u&(1<<_+w)-1)>>_)])>>>16&255,m=65535&C,!(_+(v=C>>>24)<=l);){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}u>>>=_,l-=_,r.back+=_}if(u>>>=v,l-=v,r.back+=v,64&y){t.msg="invalid distance code",r.mode=rr;break}r.offset=m,r.extra=15&y,r.mode=16203;case 16203:if(r.extra){for(I=r.extra;l<I;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=rr;break}r.mode=16204;case 16204:if(0===c)break t;if(d=h-c,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=rr;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=i,p=a-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do{i[a++]=g[p++]}while(--d);0===r.length&&(r.mode=tr);break;case 16205:if(0===c)break t;i[a++]=r.length,c--,r.mode=tr;break;case er:if(r.wrap){for(;l<32;){if(0===s)break t;s--,u|=n[o++]<<l,l+=8}if(h-=c,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?X(r.check,i,h,a-h):K(r.check,i,h,a-h)),h=c,4&r.wrap&&(r.flags?u:nr(u))!==r.check){t.msg="incorrect data check",r.mode=rr;break}u=0,l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break t;s--,u+=n[o++]<<l,l+=8}if(4&r.wrap&&u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=rr;break}u=0,l=0}r.mode=16208;case 16208:E=Fe;break t;case rr:E=We;break t;case 16210:return Ye;default:return He}return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=l,(r.wsize||h!==t.avail_out&&r.mode<rr&&(r.mode<er||e!==Re))&&pr(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?X(r.check,i,h,t.next_out-h):K(r.check,i,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Xe?128:0)+(r.mode===Ze||r.mode===Qe?256:0),(0===f&&0===h||e===Re)&&E===Me&&(E=$e),E},inflateEnd:function(t){if(sr(t))return He;var e=t.state;return e.window&&(e.window=null),t.state=null,Me},inflateGetHeader:function(t,e){if(sr(t))return He;var r=t.state;return 2&r.wrap?(r.head=e,e.done=!1,Me):He},inflateSetDictionary:function(t,e){var r,n=e.length;return sr(t)||0!==(r=t.state).wrap&&r.mode!==qe?He:r.mode===qe&&K(1,e,n,0)!==r.check?We:pr(t,e,n,n)?(r.mode=16210,Ye):(r.havedict=1,Me)},inflateInfo:"pako inflate (from Nodeca project)"},vr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},yr=Object.prototype.toString,mr=Q,_r=et,wr=it,br=ot,kr=at,Er=st,xr=ct,Ir=ut;function Cr(t){this.options=he.assign({chunkSize:65536,windowBits:15,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ye,this.strm.avail_out=0;var r=gr.inflateInit2(this.strm,e.windowBits);if(r!==wr)throw new Error(J[r]);if(this.header=new vr,gr.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ve.string2buf(e.dictionary):"[object ArrayBuffer]"===yr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=gr.inflateSetDictionary(this.strm,e.dictionary))!==wr))throw new Error(J[r])}Cr.prototype.push=function(t,e){var r,n,i,o=this.strm,a=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=e===~~e?e:!0===e?_r:mr,"[object ArrayBuffer]"===yr.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(r=gr.inflate(o,n))===kr&&s&&((r=gr.inflateSetDictionary(o,s))===wr?r=gr.inflate(o,n):r===xr&&(r=kr));o.avail_in>0&&r===br&&o.state.wrap>0&&0!==t[o.next_in];)gr.inflateReset(o),r=gr.inflate(o,n);switch(r){case Er:case xr:case kr:case Ir:return this.onEnd(r),this.ended=!0,!1}if(i=o.avail_out,o.next_out&&(0===o.avail_out||r===br))if("string"===this.options.to){var c=ve.utf8border(o.output,o.next_out),u=o.next_out-c,l=ve.buf2string(o.output,c);o.next_out=u,o.avail_out=a-u,u&&o.output.set(o.output.subarray(c,c+u),0),this.onData(l)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(r!==wr||0!==i){if(r===br)return r=gr.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},Cr.prototype.onData=function(t){this.chunks.push(t)},Cr.prototype.onEnd=function(t){t===wr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=he.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};for(var Lr=Ae,Br=Cr,Ar=function(t,e){var r=new Cr(e);if(r.push(t),r.err)throw r.msg||J[r.err];return r.result},Sr=[137,80,78,71,13,10,26,10],Or=[],Pr=0;Pr<256;Pr++){for(var Ur=Pr,Tr=0;Tr<8;Tr++)1&Ur?Ur=3988292384^Ur>>>1:Ur>>>=1;Or[Pr]=Ur}var jr,Dr,Rr,zr,Nr=4294967295;function Mr(t,e){return(function(t,e,r){for(var n=t,i=0;i<r;i++)n=Or[255&(n^e[i])]^n>>>8;return n}(Nr,t,e)^Nr)>>>0}!function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.GREYSCALE=0]="GREYSCALE",t[t.TRUECOLOUR=2]="TRUECOLOUR",t[t.INDEXED_COLOUR=3]="INDEXED_COLOUR",t[t.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",t[t.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(jr||(jr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.DEFLATE=0]="DEFLATE"}(Dr||(Dr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.ADAPTIVE=0]="ADAPTIVE"}(Rr||(Rr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NO_INTERLACE=0]="NO_INTERLACE",t[t.ADAM7=1]="ADAM7"}(zr||(zr={}));var Fr=new Uint8Array(0),Gr=new Uint16Array([255]),Hr=255===new Uint8Array(Gr.buffer)[0],Wr=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e),r=l(this,e,[t]);var i=n.checkCrc,o=void 0!==i&&i;return r._checkCrc=o,r._inflator=new Br,r._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},r._end=!1,r._hasPalette=!1,r._palette=[],r._hasTransparency=!1,r._transparency=new Uint16Array(0),r._compressionMethod=Dr.UNKNOWN,r._filterMethod=Rr.UNKNOWN,r._interlaceMethod=zr.UNKNOWN,r._colorType=jr.UNKNOWN,r.setBigEndian(),r}return d(e,t),y(e,[{key:"decode",value:function(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}},{key:"decodeSignature",value:function(){for(var t=0;t<Sr.length;t++)if(this.readUint8()!==Sr[t])throw new Error("wrong PNG signature. Byte at ".concat(t," should be ").concat(Sr[t],"."))}},{key:"decodeChunk",value:function(){var t=this.readUint32(),e=this.readChars(4),r=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-r!==t)throw new Error("Length mismatch while decoding chunk ".concat(e));if(this._checkCrc){var n=this.readUint32(),i=t+4,o=Mr(new Uint8Array(this.buffer,this.byteOffset+this.offset-i-4,i),i);if(o!==n)throw new Error("CRC mismatch for chunk ".concat(e,". Expected ").concat(n,", found ").concat(o))}else this.skip(4)}},{key:"decodeIHDR",value:function(){var t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function(t){if(1!==t&&2!==t&&4!==t&&8!==t&&16!==t)throw new Error("invalid bit depth: ".concat(t));return t}(this.readUint8());var e,r=this.readUint8();switch(this._colorType=r,r){case jr.GREYSCALE:e=1;break;case jr.TRUECOLOUR:e=3;break;case jr.INDEXED_COLOUR:e=1;break;case jr.GREYSCALE_ALPHA:e=2;break;case jr.TRUECOLOUR_ALPHA:e=4;break;default:throw new Error("Unknown color type: ".concat(r))}if(this._png.channels=e,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dr.DEFLATE)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}},{key:"decodePLTE",value:function(t){if(t%3!=0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(t));var e=t/3;this._hasPalette=!0;var r=[];this._palette=r;for(var n=0;n<e;n++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}},{key:"decodeIDAT",value:function(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}},{key:"decodetRNS",value:function(t){switch(this._colorType){case jr.GREYSCALE:case jr.TRUECOLOUR:if(t%2!=0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(t));if(t/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(t/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(var e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break;case jr.INDEXED_COLOUR:if(t>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(t," vs ").concat(this._palette.length,")"));for(var r=0;r<t;r++){var n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break;default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}},{key:"decodeiCCP",value:function(t){for(var e,r="";"\0"!==(e=this.readChar());)r+=e;var n=this.readUint8();if(n!==Dr.DEFLATE)throw new Error("Unsupported iCCP compression method: ".concat(n));var i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Ar(i)}}},{key:"decodetEXt",value:function(t){for(var e,r="";"\0"!==(e=this.readChar());)r+=e;this._png.text[r]=this.readChars(t-r.length-1)}},{key:"decodepHYs",value:function(){var t=this.readUint32(),e=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:e,unit:r}}},{key:"decodeImage",value:function(){if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));var t=this._inflator.result;if(this._filterMethod!==Rr.ADAPTIVE)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod!==zr.NO_INTERLACE)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this.decodeInterlaceNull(t)}},{key:"decodeInterlaceNull",value:function(t){for(var e,r,n,i=this._png.height,o=this._png.channels*this._png.depth/8,a=this._png.width*o,s=new Uint8Array(this._png.height*a),c=Fr,u=0,l=0;l<i;l++){switch(e=t.subarray(u+1,u+1+a),r=s.subarray(l*a,(l+1)*a),t[u]){case 0:Yr(e,r,a);break;case 1:$r(e,r,a,o);break;case 2:Vr(e,r,c,a);break;case 3:Kr(e,r,c,a,o);break;case 4:qr(e,r,c,a,o);break;default:throw new Error("Unsupported filter: ".concat(t[u]))}c=r,u+=a+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),16===this._png.depth){var f=new Uint16Array(s.buffer);if(Hr)for(var h=0;h<f.length;h++)f[h]=(255&(n=f[h]))<<8|n>>8&255;this._png.data=f}else this._png.data=s}}])}(u);function Yr(t,e,r){for(var n=0;n<r;n++)e[n]=t[n]}function $r(t,e,r,n){for(var i=0;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function Vr(t,e,r,n){var i=0;if(0===r.length)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function Kr(t,e,r,n,i){var o=0;if(0===r.length){for(;o<i;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=t[o]+(r[o]>>1)&255;for(;o<n;o++)e[o]=t[o]+(e[o-i]+r[o]>>1)&255}}function qr(t,e,r,n,i){var o=0;if(0===r.length){for(;o<i;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=t[o]+r[o]&255;for(;o<n;o++)e[o]=t[o]+Xr(e[o-i],r[o],r[o-i])&255}}function Xr(t,e,r){var n=t+e-r,i=Math.abs(n-t),o=Math.abs(n-e),a=Math.abs(n-r);return i<=o&&i<=a?t:o<=a?e:r}var Jr,Qr={level:3},Zr=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(this,e),(r=l(this,e))._colorType=jr.UNKNOWN,r._zlibOptions=c(c({},Qr),n.zlib),r._png=r._checkData(t),r.setBigEndian(),r}return d(e,t),y(e,[{key:"encode",value:function(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}},{key:"encodeSignature",value:function(){this.writeBytes(Sr)}},{key:"encodeIHDR",value:function(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(Dr.DEFLATE),this.writeByte(Rr.ADAPTIVE),this.writeByte(zr.NO_INTERLACE),this.writeCrc(17)}},{key:"encodeIEND",value:function(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}},{key:"encodeIDAT",value:function(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}},{key:"encodeData",value:function(){for(var t=this._png,e=t.width,r=t.height,n=t.channels,i=t.depth,o=t.data,a=n*e,s=(new u).setBigEndian(),c=0,l=0;l<r;l++)if(s.writeByte(0),8===i)c=en(o,s,a,c);else{if(16!==i)throw new Error("unreachable");c=rn(o,s,a,c)}var f=s.toArray(),h=Lr(f,this._zlibOptions);this.encodeIDAT(h)}},{key:"_checkData",value:function(t){var e=function(t){var e=t.channels,r=void 0===e?4:e,n=t.depth,i=void 0===n?8:n;if(4!==r&&3!==r&&2!==r&&1!==r)throw new RangeError("unsupported number of channels: ".concat(r));if(8!==i&&16!==i)throw new RangeError("unsupported bit depth: ".concat(i));var o={channels:r,depth:i,colorType:jr.UNKNOWN};switch(r){case 4:o.colorType=jr.TRUECOLOUR_ALPHA;break;case 3:o.colorType=jr.TRUECOLOUR;break;case 1:o.colorType=jr.GREYSCALE;break;case 2:o.colorType=jr.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return o}(t),r=e.colorType,n=e.channels,i=e.depth,o={width:tn(t.width,"width"),height:tn(t.height,"height"),channels:n,data:t.data,depth:i,text:{}};this._colorType=r;var a=o.width*o.height*n;if(o.data.length!==a)throw new RangeError("wrong data size. Found ".concat(o.data.length,", expected ").concat(a));return o}},{key:"writeCrc",value:function(t){this.writeUint32(Mr(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}])}(u);function tn(t,e){if(Number.isInteger(t)&&t>0)return t;throw new TypeError("".concat(e," must be a positive integer"))}function en(t,e,r,n){for(var i=0;i<r;i++)e.writeByte(t[n++]);return n}function rn(t,e,r,n){for(var i=0;i<r;i++)e.writeUint16(t[n++]);return n}function nn(t){return nn="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)},nn(t)}function on(){on=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),s=new S(n||[]);return i(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function m(){}function _(){}var w={};u(w,a,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(O([])));k&&k!==r&&n.call(k,a)&&(w=k);var E=_.prototype=y.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(i,o,a,s){var c=f(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==nn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function C(e,r,n){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=f(e,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function L(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(nn(e)+" is not iterable")}return m.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new I(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function an(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function sn(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){an(o,n,i,a,s,"next",t)}function s(t){an(o,n,i,a,s,"throw",t)}a(void 0)}))}}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"}(Jr||(Jr={}));var cn=function(){var t=sn(on().mark((function t(e){return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=new FileReader;n.onload=sn(on().mark((function e(){var i;return on().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=n.result,i=new Wr(o,void 0).decode(),t(new ImageData(new Uint8ClampedArray(i.data),i.width,i.height))}catch(t){r(t)}case 1:case"end":return e.stop()}var o}),e)}))),n.onerror=function(t){return r(t)},n.readAsArrayBuffer(e)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),un=function(t){return new Blob([(e=t,new Zr(e,void 0).encode())],{type:"image/png"});var e};return n}()},"object"==_(e)&&"object"==_(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(n=a)?n.apply(e,i):n)||(t.exports=o)),errorHandling.scriptsLoaded.pngLib=!0},841:function(t,e,r){var n,i,o;"undefined"!=typeof self&&self,i=[r(56)],void 0===(o="function"==typeof(n=function(t){function e(e){var r=e.target.files[0];errorHandling.currCanvasIndex=0,t.updateImageFromFile(r,CloakProcessor.CloakDecoder.updateImage,!0),e.target.value=""}function r(e){errorHandling.currCanvasIndex=0,t.updateImageFromClipboard(e,CloakProcessor.CloakDecoder.updateImage,!0)}function n(){errorHandling.currCanvasIndex=0,document.body.focus(),new ClipboardEvent("paste"),t.updateImageFromClipboardDirect(CloakProcessor.CloakDecoder.updateImage,!0)}function i(e){errorHandling.currCanvasIndex=0,t.dragDropLoadImage(e,CloakProcessor.CloakDecoder.updateImage,!0)}function o(){try{CloakProcessor.CloakDecoder.saveResult()}catch(t){alert(t.message)}}return{decodeSetupEventListeners:function(){document.getElementById("decodeImageFileInput").addEventListener("change",e),applicationState.isOnPhone?document.getElementById("decodePasteButtonInput").addEventListener("click",n):(window.addEventListener("paste",r),document.body.addEventListener("drop",i)),document.getElementById("decodeSaveButton").addEventListener("click",o)},decodeRemoveEventListeners:function(){document.getElementById("decodeImageFileInput").removeEventListener("change",e),applicationState.isOnPhone?document.getElementById("decodePasteButtonInput").removeEventListener("click",n):(window.removeEventListener("paste",r),document.body.removeEventListener("drop",i)),document.getElementById("decodeSaveButton").removeEventListener("click",o)}}})?n.apply(e,i):n)||(t.exports=o),errorHandling.scriptsLoaded.DecodeListeners=!0},741:function(t,e,r){var n,i,o;"undefined"!=typeof self&&self,i=[r(56)],void 0===(o="function"==typeof(n=function(t){function e(e){errorHandling.currCanvasIndex=1;var r=e.target.files[0];t.updateImageFromFile(r,(function(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateInnerImage(t)})),e.target.value=""}function r(e){errorHandling.currCanvasIndex=2;var r=e.target.files[0];t.updateImageFromFile(r,(function(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateCoverImage(t)})),e.target.value=""}function n(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateHiddenFile(t.target.files[0])}function i(e){errorHandling.currCanvasIndex=1,t.dragDropLoadImage(e,(function(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateInnerImage(t)}))}function o(e){errorHandling.currCanvasIndex=2,t.dragDropLoadImage(e,(function(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateCoverImage(t)}))}function a(t){t.preventDefault(),CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.updateHiddenFile(t.dataTransfer.files[0])}function s(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.adjustInnerContrast(parseInt(t.target.value,10))}function c(){CloakProcessor.CloakEncoder.clearOutputCanvas(),document.getElementById("innerContrastRange").value=50,CloakProcessor.CloakEncoder.adjustInnerContrast(50)}function u(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.adjustCoverContrast(parseInt(t.target.value,10))}function l(){CloakProcessor.CloakEncoder.clearOutputCanvas(),document.getElementById("coverContrastRange").value=50,CloakProcessor.CloakEncoder.adjustCoverContrast(50)}function f(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.adjustInnerLuminance(parseInt(t.target.value,10))}function h(){CloakProcessor.CloakEncoder.clearOutputCanvas(),document.getElementById("innerLuminanceRange").value=50,CloakProcessor.CloakEncoder.adjustInnerLuminance(50)}function d(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.adjustCoverLuminance(parseInt(t.target.value,10))}function p(){CloakProcessor.CloakEncoder.clearOutputCanvas(),document.getElementById("coverLuminanceRange").value=50,CloakProcessor.CloakEncoder.adjustCoverLuminance(50)}function g(){CloakProcessor.CloakEncoder.clearOutputCanvas();var t=parseInt(document.getElementById("mirageSizeInput").value,10);t<0||t>1e4?alert("请输入合理的整数"):CloakProcessor.CloakEncoder.setMirageSize(t)}function v(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.setIsAddMark(t.target.checked)}function y(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),CloakProcessor.CloakEncoder.setIsCompress(t.target.checked)}var m;function _(t){clearTimeout(m),m=setTimeout((function(){CloakProcessor.CloakEncoder.clearOutputCanvas();var e=parseInt(t.target.value,10);isNaN(e)||(e>applicationState.defaultArguments.max_difference?(e=applicationState.defaultArguments.max_difference,t.target.value=applicationState.defaultArguments.max_difference):e<applicationState.defaultArguments.min_difference&&(e=applicationState.defaultArguments.min_difference,t.target.value=applicationState.defaultArguments.min_difference),CloakProcessor.CloakEncoder.setDiff(6*e))}),500)}function w(t){CloakProcessor.CloakEncoder.clearOutputCanvas(),b(t.target.value)}function b(t){var e=document.getElementById("encodeDiffinputHint"),r=document.getElementById("encodeDiffInput");switch(t){case"1":e.innerText="(".concat(applicationState.defaultArguments.min_difference,"-").concat(applicationState.defaultArguments.max_difference,", 越大抗干扰能力越强, 但幻影坦克效果越差)"),r.value=Math.floor(applicationState.defaultArguments.version_1.difference/6),CloakProcessor.CloakEncoder.setVersion(parseInt(t,10)),CloakProcessor.CloakEncoder.setDiff(applicationState.defaultArguments.version_1.difference);break;case"2":e.innerText="(".concat(applicationState.defaultArguments.min_difference,"-").concat(applicationState.defaultArguments.max_difference,", 越大抗干扰能力越强, 但幻影坦克效果越差)"),r.value=Math.floor(applicationState.defaultArguments.version_2.difference/6),CloakProcessor.CloakEncoder.setVersion(parseInt(t,10)),CloakProcessor.CloakEncoder.setDiff(applicationState.defaultArguments.version_2.difference);break;case"0":e.innerText="(".concat(applicationState.defaultArguments.min_difference,"-").concat(applicationState.defaultArguments.max_difference,", 越大隐写信息密度越高, 但幻影坦克效果越差)"),r.value=Math.ceil(applicationState.defaultArguments.version_0.difference/6),CloakProcessor.CloakEncoder.setDiff(applicationState.defaultArguments.version_0.difference),CloakProcessor.CloakEncoder.setVersion(parseInt(t,10))}}function k(){CloakProcessor.CloakEncoder.clearOutputCanvas();try{CloakProcessor.CloakEncoder.process()}catch(t){alert(t)}}function E(){try{CloakProcessor.CloakEncoder.saveOutputImage()}catch(t){alert(t)}}return{setDiffHelper:b,encodeSetUpEventListeners:function(){document.getElementById("innerSourceFileInput").addEventListener("change",e),document.getElementById("coverSourceFileInput").addEventListener("change",r),document.getElementById("hiddenSourceFileInput").addEventListener("change",n),applicationState.isOnPhone||(document.getElementById("innerCanvas").addEventListener("drop",i),document.getElementById("coverCanvas").addEventListener("drop",o),document.getElementById("hiddenCanvas").addEventListener("drop",a)),document.getElementById("innerContrastRange").addEventListener("input",s),document.getElementById("coverContrastRange").addEventListener("input",u),document.getElementById("innerResetContrastButton").addEventListener("click",c),document.getElementById("coverResetContrastButton").addEventListener("click",l),document.getElementById("innerLuminanceRange").addEventListener("input",f),document.getElementById("coverLuminanceRange").addEventListener("input",d),document.getElementById("innerResetLuminanceButton").addEventListener("click",h),document.getElementById("coverResetLuminanceButton").addEventListener("click",p),document.getElementById("mirageSizeConfirmButton").addEventListener("click",g),document.getElementById("isAddMarkCheckbox").addEventListener("change",v),document.getElementById("isEncodeCompressCheckbox").addEventListener("change",y),document.getElementById("encodeDiffInput").addEventListener("change",_),document.getElementById("encodeMethodSelect").addEventListener("change",w),document.getElementById("encodeProcessButton").addEventListener("click",k),document.getElementById("encodeSaveButton").addEventListener("click",E)},encodeRemoveEventListeners:function(){document.getElementById("innerSourceFileInput").removeEventListener("change",e),document.getElementById("coverSourceFileInput").removeEventListener("change",r),document.getElementById("hiddenSourceFileInput").removeEventListener("change",n),applicationState.isOnPhone||(document.getElementById("innerCanvas").removeEventListener("drop",i),document.getElementById("coverCanvas").removeEventListener("drop",o),document.getElementById("hiddenCanvas").removeEventListener("drop",a)),document.getElementById("innerContrastRange").removeEventListener("input",s),document.getElementById("coverContrastRange").removeEventListener("input",u),document.getElementById("innerResetContrastButton").removeEventListener("click",c),document.getElementById("coverResetContrastButton").removeEventListener("click",l),document.getElementById("innerLuminanceRange").removeEventListener("input",f),document.getElementById("coverLuminanceRange").removeEventListener("input",d),document.getElementById("innerResetLuminanceButton").removeEventListener("click",h),document.getElementById("coverResetLuminanceButton").removeEventListener("click",p),document.getElementById("mirageSizeConfirmButton").removeEventListener("click",g),document.getElementById("isAddMarkCheckbox").removeEventListener("change",v),document.getElementById("isEncodeCompressCheckbox").removeEventListener("change",y),document.getElementById("encodeDiffInput").removeEventListener("change",_),document.getElementById("encodeMethodSelect").removeEventListener("change",w),document.getElementById("encodeProcessButton").removeEventListener("click",k),document.getElementById("encodeSaveButton").removeEventListener("click",E)}}})?n.apply(e,i):n)||(t.exports=o),errorHandling.scriptsLoaded.EncodeListeners=!0},56:function(t,e){var r,n;function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(){"use strict";a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,a=Object.create(o.prototype),s=new P(n||[]);return i(a,"_invoke",{value:B(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",g="suspendedYield",v="executing",y="completed",m={};function _(){}function w(){}function b(){}var k={};f(k,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(U([])));x&&x!==r&&n.call(x,s)&&(k=x);var I=b.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var c=d(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function B(e,r,n){var i=p;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var u=d(e,r,n);if("normal"===u.type){if(i=n.done?y:g,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=y,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},C(L.prototype),f(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(h(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(I),f(I,l,"Generator"),f(I,s,(function(){return this})),f(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function s(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,c,"next",t)}function c(t){s(o,n,i,a,c,"throw",t)}a(void 0)}))}}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}"undefined"!=typeof self&&self,r=function(){function t(t,e){alert("图像处理失败！"+t)}function e(t){return r.apply(this,arguments)}function r(){return r=c(a().mark((function t(e){var r,n=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:5e3,t.abrupt("return",new Promise((function(t,n){var i,o=new Image;if(o.onload=function(){clearTimeout(i),t(o)},o.onerror=function(t){clearTimeout(i),n(t)},i=setTimeout((function(){o.src="",n(new Error("加载图像超时"))}),r),"string"==typeof e)o.crossOrigin="anonymous",o.src=e;else if(e instanceof File){var a=new FileReader;a.onload=function(t){o.src=t.target.result},a.onerror=function(t){clearTimeout(i),n(t)},a.readAsDataURL(e)}else clearTimeout(i),n(new Error("不支持的输入类型"))})));case 2:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function n(){return n=c(a().mark((function r(n,i){var o=arguments;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o.length>2&&void 0!==o[2]&&o[2]?i(n).then().catch((function(e){t(e)})):e(n).then((function(t){i(t)})).catch((function(e){t(e)}));case 2:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}function o(){return o=c(a().mark((function r(n,o){var s,c,u,l,f,h,d=arguments;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=d.length>2&&void 0!==d[2]&&d[2],c=(n.clipboardData||n.originalEvent.clipboardData).items,u=i(c);try{for(u.s();!(l=u.n()).done;)-1!==(f=l.value).type.indexOf("image")&&(h=f.getAsFile(),s?o(h).then().catch((function(e){t(e)})):e(h).then((function(t){o(t)})).catch((function(e){t(e)})))}catch(t){u.e(t)}finally{u.f()}case 4:case"end":return r.stop()}}),r)}))),o.apply(this,arguments)}function s(){return s=c(a().mark((function r(n){var o,s,c,u,l,f,h,d=arguments;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=d.length>1&&void 0!==d[1]&&d[1],r.prev=1,r.next=4,navigator.permissions.query({name:"clipboard-read"});case 4:if("granted"!==(s=r.sent).state&&"prompt"!==s.state){r.next=34;break}return r.next=8,navigator.clipboard.read();case 8:c=r.sent,u=i(c),r.prev=10,u.s();case 12:if((l=u.n()).done){r.next=24;break}if(!(f=l.value).types.some((function(t){return t.startsWith("image/")}))){r.next=21;break}return r.next=17,f.getType(f.types.find((function(t){return t.startsWith("image/")})));case 17:h=r.sent,o?n(h).then().catch((function(e){t(e)})):e(h).then((function(t){n(t)})).catch((function(t){throw t})),r.next=22;break;case 21:throw new Error("剪贴板中没有图像");case 22:r.next=12;break;case 24:r.next=29;break;case 26:r.prev=26,r.t0=r.catch(10),u.e(r.t0);case 29:return r.prev=29,u.f(),r.finish(29);case 32:r.next=35;break;case 34:throw new Error("未获得剪贴板访问权限");case 35:r.next=40;break;case 37:r.prev=37,r.t1=r.catch(1),t(r.t1);case 40:case"end":return r.stop()}}),r,null,[[1,37],[10,26,29,32]])}))),s.apply(this,arguments)}function u(){return u=c(a().mark((function r(n,o){var s,c,u,l,f,h=arguments;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=h.length>2&&void 0!==h[2]&&h[2],n.preventDefault(),n.dataTransfer.items){c=i(n.dataTransfer.items);try{for(c.s();!(u=c.n()).done;)"file"===(l=u.value).kind&&(f=l.getAsFile(),s?o(f).then().catch((function(e){t(e)})):e(f).then((function(t){o(t)})).catch((function(e){t(e)})))}catch(t){c.e(t)}finally{c.f()}}case 3:case"end":return r.stop()}}),r)}))),u.apply(this,arguments)}return applicationState.currCanvasIndex=0,{copyImage:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);var r=e.toDataURL();return e.remove(),r},updateImageFromFile:function(t,e){return n.apply(this,arguments)},updateImageFromClipboard:function(t,e){return o.apply(this,arguments)},updateImageFromClipboardDirect:function(t){return s.apply(this,arguments)},dragDropLoadImage:function(t,e){return u.apply(this,arguments)}}},void 0===(n=r.apply(e,[]))||(t.exports=n),errorHandling.scriptsLoaded.ImageLoader=!0},222:function(t,e,r){var n,i,o;"undefined"!=typeof self&&self,i=[r(841),r(741)],void 0===(o="function"==typeof(n=function(t,e){return{switchPage:function r(){var n=document.getElementById("decodePage"),i=document.getElementById("encodePage"),o=document.getElementById("decodeButton"),a=document.getElementById("encodeButton");"decodePage"===applicationState.currPageId?(i.classList.remove("displayNone"),i.classList.add("displayFlex"),n.classList.remove("displayFlex"),n.classList.add("displayNone"),o.classList.remove("backgroundSecondary"),o.classList.add("backgroundNotSelected"),a.classList.remove("backgroundNotSelected"),a.classList.add("backgroundSecondary"),o.addEventListener("click",r),a.removeEventListener("click",r),t.decodeRemoveEventListeners(),e.encodeSetUpEventListeners(),applicationState.currPageId="encodePage"):(n.classList.remove("displayNone"),n.classList.add("displayFlex"),i.classList.remove("displayFlex"),i.classList.add("displayNone"),o.classList.remove("backgroundNotSelected"),o.classList.add("backgroundSecondary"),a.classList.remove("backgroundSecondary"),a.classList.add("backgroundNotSelected"),a.addEventListener("click",r),o.removeEventListener("click",r),t.decodeSetupEventListeners(),e.encodeRemoveEventListeners(),applicationState.currPageId="decodePage")},universalSetupEventListeners:function(){document.getElementById("togglePrivacyPolicy").addEventListener("click",(function(t){var e=document.getElementById("privacyPolicy");"none"===window.getComputedStyle(e).display?(e.classList.remove("displayNone"),e.classList.add("displayBlock"),t.target.textContent="隐藏使用须知",window.scrollTo(0,document.body.scrollHeight)):(e.classList.remove("displayBlock"),e.classList.add("displayNone"),t.target.textContent="显示使用须知")})),document.getElementById("toggleVersionRecord").addEventListener("click",(function(t){var e=document.getElementById("versionRecordTable");"none"===window.getComputedStyle(e).display?(e.classList.remove("displayNone"),e.classList.add("displayBlock"),t.target.textContent="隐藏主要更新记录",window.scrollTo(0,document.body.scrollHeight)):(e.classList.remove("displayBlock"),e.classList.add("displayNone"),t.target.textContent="显示主要更新记录")})),document.addEventListener("dragover",(function(t){t.preventDefault()})),document.getElementById("isDarkmodeCheckbox").addEventListener("change",(function(t){var e=t.target.checked?"dark":"light";applyTheme(e)}))}}})?n.apply(e,i):n)||(t.exports=o),errorHandling.scriptsLoaded.UniversalListeners=!0},274:function(t,e,r){var n,i,o;function a(){"use strict";a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,a=Object.create(o.prototype),s=new P(n||[]);return i(a,"_invoke",{value:B(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",p="suspendedYield",g="executing",v="completed",y={};function _(){}function w(){}function b(){}var k={};l(k,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(U([])));x&&x!==r&&n.call(x,s)&&(k=x);var I=b.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var c=h(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==m(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function B(e,r,n){var i=d;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var u=h(e,r,n);if("normal"===u.type){if(i=n.done?v:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(m(e)+" is not iterable")}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},C(L.prototype),l(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(I),l(I,u,"Generator"),l(I,s,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function s(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,c,"next",t)}function c(t){s(o,n,i,a,c,"throw",t)}a(void 0)}))}}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function l(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e,r){return e=p(e),function(t,e){if(e&&("object"==m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function v(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}"undefined"!=typeof self&&self,i=[r(103),r(479)],n=function(t,e){var r=function(r){function s(r,u,l){var d;return f(this,s),v(d=h(this,s,[r]),"updateImage",function(){var t=c(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){d._dataUrl&&URL.revokeObjectURL(d._dataUrl);var i=new Image;i.onload=c(a().mark((function o(){return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,d._inputCanvas.width=i.width,d._inputCanvas.height=i.height,d._inputCanvas.getContext("2d").drawImage(i,0,0),URL.revokeObjectURL(i.src),d._srcImageFile=r,o.next=8,e.getImageDataFromImageFile(r).catch((function(t){throw t}));case 8:d._srcImageData=o.sent,d.process(),t(),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0);try{alert("第一次处理失败，正在尝试第二次加载..."+o.t0),d._srcImageData=d._inputCanvas.getContext("2d").getImageData(0,0,d._inputCanvas.width,d._inputCanvas.height),d.process(),t()}catch(t){n(t)}case 16:case"end":return o.stop()}}),o,null,[[0,13]])}))),i.onerror=function(t){n(t)},i.src=URL.createObjectURL(r)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),v(d,"process",(function(){if(!d._srcImageData)throw new Error("请先加载图像！");console.log("Decoding..."),d.clearCanvas(d._outputCanvas),d._fileExtension=null,d._byteArray=null,d._fileType=null,d._dataUrl=null;var e=d._decoders[1].getVersion(d._srcImageData);if(console.log("   Version: "+e),e>=d._decoders.length)throw new Error("未知的编码方式！");var r=d._decoders[e].decode(d._srcImageData),n=r.fileExtension,i=r.byteArray;d._fileExtension=n,d._byteArray=i,d._fileType=t.classifyFileType(d._fileExtension);var o=new Blob([d._byteArray],{type:d._fileType});d._dataUrl=URL.createObjectURL(o),d.showResult(d._outputCanvas,d._dataUrl,d._fileExtension),console.log("Decoding finished")})),v(d,"saveResult",(function(){if(!d._dataUrl)throw new Error("没有文件可供保存！");d.saveResultFromUrl(d._dataUrl,d._fileExtension)})),d._srcImageFile=null,d._srcImageData=null,d._inputCanvas=document.getElementById(u),d._outputCanvas=document.getElementById(l),d._version=r.version,d._decoders=[new o(r),new n(r),new i(r)],d}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(s,r),l(s)}(t),n=l((function t(e){var r=this;f(this,t),v(this,"getVersion",(function(t){var e=t.data;return!(7&e[0])&&3==(7&e[1])&&(7&e[2])>=1&&(7&e[2])<=6?0:(r._pos=0,r._threshold=r._globalDefaultThreshold,r._dataRange=t.data.length,r._getByte(t.data))})),v(this,"decode",(function(t){r._pos=12,r._threshold=r._defaultThreshold,r._dataRange=t.data.length;var e=t.data;r._threshold=r._getByte(e),console.log("   Threshold: "+r._threshold);for(var n=0,i=0;i<32;i+=8)n|=r._getByte(e)<<i;console.log("   Size to be decoded: "+n);for(var o="",a=!1,s=0;s<r._remained-6;s++){var c=r._getByte(e);a||(0===c?a=!0:o+=String.fromCharCode(c))}console.log("   File extension: "+o);for(var u=new Uint8Array(n),l=0;l<n;l++)u[l]=r._getByte(e);return{fileExtension:o,byteArray:u}})),v(this,"_getByte",(function(t){for(var e=0,n=0;r._pos<r._dataRange;r._pos+=4){var i=r._isSetL;if(t[r._pos]>127&&(i=r._isSetH),e|=i(t[r._pos])<<n++,e|=i(t[r._pos+1])<<n++,8===n){var o=i(t[r._pos+2]);if(r._checkParity(e,o))return r._pos+=4,e;console.log("Error Info:"),console.log("   Data: "+e.toString(16)),console.log("   Parity: "+o),console.log("   Pixel Index: "+r._pos/4),console.log("   Previous RGB:");for(var a=2;a>=0;a--)console.log(t[r._pos-4*a]),console.log(t[r._pos-4*a+1]),console.log(t[r._pos-4*a+2]);throw new Error("数据校验失败！详细信息可查看控制台输出。")}e|=i(t[r._pos+2])<<n++}throw new Error("不期望的文件结尾！")})),v(this,"_isSetH",(function(t){return t<255-r._threshold})),v(this,"_isSetL",(function(t){return t>r._threshold})),v(this,"_checkParity",(function(t,e){for(var r=0,n=0;n<8;n++)r^=t>>n&1;return r==e})),this._globalDefaultThreshold=e.default_threshold,this._defaultThreshold=e.version_1.default_threshold,this._remained=e.version_1.remained})),i=l((function t(e){var r=this;f(this,t),v(this,"decode",(function(t){r._pos=12,r._threshold=r._defaultThreshold,r._dataRange=t.data.length;var e=t.data;r._threshold=r._getBytePair(e),console.log("   Threshold: "+r._threshold);for(var n=0,i=0;i<32;i+=16)n|=r._getBytePair(e)<<i;console.log("   Size to be decoded: "+n);for(var o="",a=!1,s=0;s<r._remained-4;s++){var c=r._getBytePair(e);a||(0===c?a=!0:o+=String.fromCharCode(c))}console.log("   File extension: "+o);for(var u=new Uint8Array(n),l=0;l<n-2;l+=2){var f=r._getBytePair(e);u[l]=255&f,u[l+1]=f>>8}if(1&n)u[n-1]=r._getBytePair(e);else{var h=r._getBytePair(e);u[n-2]=255&h,u[n-1]=h>>8}return{fileExtension:o,byteArray:u}})),v(this,"_getBytePair",(function(t){for(var e=0,n=0;r._pos<r._dataRange;r._pos+=4){var i=r._getBitsPairL;if(t[r._pos]>127&&(i=r._getBitsPairH),e|=i(t[r._pos])<<(n++<<1),e|=i(t[r._pos+1])<<(n++<<1),8===n){var o=i(t[r._pos+2]);if(r._checkParityPair(e,o))return r._pos+=4,e;console.log("Error Info:"),console.log("   Data: "+e.toString(16)),console.log("   Parity: "+o),console.log("   Pixel Index: "+r._pos/4),console.log("   Previous RGB:");for(var a=2;a>=0;a--)console.log(t[r._pos-4*a]),console.log(t[r._pos-4*a+1]),console.log(t[r._pos-4*a+2]);throw new Error("数据校验失败！详情可查看控制台输出。")}e|=i(t[r._pos+2])<<(n++<<1)}throw new Error("不期望的文件结尾！")})),v(this,"_getBitsPairH",(function(t){return Math.max(Math.min(Math.floor((255-t+r._threshold)/(r._threshold<<1)),3),0)})),v(this,"_getBitsPairL",(function(t){return Math.max(Math.min(Math.floor((t+r._threshold)/(r._threshold<<1)),3),0)})),v(this,"_checkParityPair",(function(t,e){for(var r=0,n=0;n<8;n++)r^=t>>n&1;for(var i=8;i<16;i++)r^=(t>>i&1)<<1;return r==e})),this._defaultThreshold=e.version_2.default_threshold,this._remained=e.version_2.remained})),o=l((function t(e){var r=this;f(this,t),v(this,"decode",(function(t){if(r._data=t.data,r._compress=7&r._data[2],!r._compress)throw new Error("错误的标识符！");var e;console.log("   Compression: "+r._compress),r._dataPos=4,r._buffer=0,r._bufferSize=0;for(var n=0;1!==(e=r._getByte());)n=10*n+e-48;console.log("   Size to be decoded: "+n);for(var i="";1!==(e=r._getByte());)i+=String.fromCharCode(e);for(-1!==i.indexOf(".")&&(i=i.substring(i.indexOf(".")+1)),console.log("   File extension: "+i);0!==(e=r._getByte()););for(var o=new Uint8Array(n),a=0;a<n;a++)o[a]=r._getByte();return{fileExtension:i,byteArray:o}})),v(this,"_getByte",(function(){for(;r._bufferSize<8;){if(r._buffer=r._buffer<<r._compress|r._data[r._dataPos]&(1<<r._compress)-1,r._bufferSize+=r._compress,r._dataPos++,r._dataPos>=r._data.length)throw new Error("不期望的文件结尾！");3&~r._dataPos||r._dataPos++}r._bufferSize-=8;var t=r._buffer&255<<r._bufferSize;return r._buffer&=(1<<r._bufferSize)-1,t>>r._bufferSize}))}));return r},void 0===(o=n.apply(e,i))||(t.exports=o),errorHandling.scriptsLoaded.CloakDecoder=!0},158:function(t,e,r){var n,i,o;function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},c.apply(null,arguments)}function u(){"use strict";u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),s=new P(n||[]);return i(a,"_invoke",{value:B(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",p="suspendedYield",g="executing",v="completed",y={};function m(){}function _(){}function w(){}var b={};l(b,a,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(U([])));x&&x!==r&&n.call(x,a)&&(b=x);var I=w.prototype=m.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var c=h(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==k(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function B(e,r,n){var i=d;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var u=h(e,r,n);if("normal"===u.type){if(i=n.done?v:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(k(e)+" is not iterable")}return _.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},C(L.prototype),l(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(I),l(I,c,"Generator"),l(I,a,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function l(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){l(o,n,i,a,s,"next",t)}function s(t){l(o,n,i,a,s,"throw",t)}a(void 0)}))}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function p(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e,r){return e=y(e),function(t,e){if(e&&("object"==k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(e,r||[],y(t).constructor):e.apply(t,r))}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function w(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}"undefined"!=typeof self&&self,i=[r(103),r(479),r(563)],n=function(t,e,r){var n=function(t){function n(t,a,c,l,d,p,v){var y;return h(this,n),w(y=g(this,n,[t]),"updateInnerImage",function(){var t=f(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y._innerImage=e,0!==y._mirageSize?y._innerImage.width>y._innerImage.height?(y._width=y._mirageSize,y._height=Math.ceil(y._innerImage.height*y._mirageSize/y._innerImage.width)):(y._height=y._mirageSize,y._width=Math.ceil(y._innerImage.width*y._mirageSize/y._innerImage.height)):(y._width=y._innerImage.width,y._height=y._innerImage.height),!y._byteArray){t.next=7;break}return t.next=5,y._adjustSize();case 5:r=t.sent,console.log("Size to be encoded: "+r);case 7:y._innerCanvas.width=y._width,y._innerCanvas.height=y._height,(n=y._innerCanvas.getContext("2d")).drawImage(e,0,0,y._width,y._height),y._innerImageData=n.getImageData(0,0,y._width,y._height),y._sizeLabel.innerHTML="输出图像预计尺寸: ".concat(y._width,"x").concat(y._height),y.convertGray(y._innerImageData),y.adjustImageData(y._innerCanvas,y._innerImageData,y._innerContrast,y._innerLuminance),y._isAddMark&&y.addMark(y._innerCanvas,y._markImage),y._coverImageData&&y.updateCoverImage(y._coverImage);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),w(y,"_adjustSize",f(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=f(u().mark((function t(e,n){var i,o,a,s,c,l,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y._width*y._height,!((o=y._encoders[y._version].getRequiredLength(y._byteArray,y._diff))>i)){t.next=42;break}if(a=o/i,!y._hiddenFile.type.startsWith("image")||y._hiddenFile.type.startsWith("image/gif")){t.next=34;break}return t.next=7,y._drawHiddenImageOnCanvas();case 7:if(!y._isCompress){t.next=31;break}if(!(s=y._hiddenCanvas.getContext("2d").getImageData(0,0,y._hiddenCanvas.width,y._hiddenCanvas.height))){t.next=31;break}if(c=new r(y._compressQuality),l=c.encode(s),o=y._encoders[y._version].getRequiredLength(l,y._diff),!((a=o/i)>1)){t.next=26;break}return a=Math.sqrt(a),y._hiddenCanvas.width=Math.ceil(y._hiddenCanvas.width*a),y._hiddenCanvas.height=Math.ceil(y._hiddenCanvas.height*a),t.next=20,y._drawHiddenImageOnCanvas(1/a);case 20:f=y._hiddenCanvas.getContext("2d"),s=f.getImageData(0,0,y._hiddenCanvas.width,y._hiddenCanvas.height),l=c.encode(s),o=y._encoders[y._version].getRequiredLength(l,y._diff),(a=o/i)>1&&y._scaleSize(a);case 26:return y._hiddenSizeLabel.innerHTML="隐藏图像尺寸: ".concat(y._hiddenCanvas.width,"x").concat(y._hiddenCanvas.height),y._byteArrayCompressed=l,y._fileExtensionCompressed="jpg",e(y._byteArrayCompressed.length),t.abrupt("return");case 31:y._hiddenSizeLabel.innerHTML="隐藏图像尺寸: ".concat(y._hiddenCanvas.width,"x").concat(y._hiddenCanvas.height),t.next=37;break;case 34:y._hiddenSizeLabel.innerHTML="",y._byteArrayCompressed=null,y._fileExtensionCompressed="";case 37:return y._scaleSize(a),e(y._byteArray.length),t.abrupt("return");case 42:return y._byteArrayCompressed=null,y._fileExtensionCompressed="",e(y._byteArray.length),t.abrupt("return");case 46:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))),w(y,"_scaleSize",(function(t){t=Math.sqrt(t),y._width=Math.ceil(y._width*t),y._height=Math.ceil(y._height*t)})),w(y,"updateHiddenFile",function(){var t=f(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y._hiddenFile=e,y._byteArrayCompressed=null,r=e.name,-1!==(n=r.lastIndexOf("."))&&n<r.length-1?(y._fileExtension=r.substring(n+1).toLowerCase(),y._fileExtension.length>10&&(alert("文件拓展名过长，已截断为: "+y._fileExtension.substring(0,10)),y._fileExtension=y._fileExtension.substring(0,10))):y._fileExtension="",!e.type.startsWith("image/")||e.type.startsWith("image/gif")){t.next=12;break}return t.next=8,y._drawHiddenImageOnCanvas();case 8:y._hiddenSizeLabel.innerHTML="隐藏图像尺寸: ".concat(y._hiddenCanvas.width,"x").concat(y._hiddenCanvas.height),y._getHiddenByteArray(),t.next=15;break;case 12:y._hiddenSizeLabel.innerHTML="",y.showTextOnCanvas(y._hiddenCanvas,"暂不支持预览此文件",e.type?"文件类型: "+e.type:""),y._getHiddenByteArray();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),w(y,"_getHiddenByteArray",(function(){var t=new FileReader;t.onload=function(t){var e=t.target.result;y._byteArray=new Uint8Array(e),y._innerImage&&y.updateInnerImage(y._innerImage)},t.readAsArrayBuffer(y._hiddenFile)})),w(y,"_drawHiddenImageOnCanvas",f(u().mark((function t(){var e,r,n=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,r=new Image,t.next=4,new Promise((function(t,n){r.onload=function(){y.clearCanvas(y._hiddenCanvas),y._hiddenCanvas.width=r.width*e,y._hiddenCanvas.height=r.height*e,y._hiddenCanvas.getContext("2d").drawImage(r,0,0,y._hiddenCanvas.width,y._hiddenCanvas.height),URL.revokeObjectURL(r.src),t()},r.onerror=n,r.src=URL.createObjectURL(y._hiddenFile)}));case 4:case"end":return t.stop()}}),t)})))),w(y,"process",(function(){if(!y._innerImageData||!y._coverImageData||!y._byteArray)throw new Error("请先选择图像和文件！");y.showTextOnCanvas(y._outputCanvas,"正在处理，请稍候...");var t=y._innerCanvas.getContext("2d").getImageData(0,0,y._width,y._height),e=y._coverCanvas.getContext("2d").getImageData(0,0,y._width,y._height);console.log("Encoding..."),console.log("    Version: "+y._version),console.log("    Output size: "+y._width+"x"+y._height),console.log("    Size to be encoded: "+(y._isCompress&&y._byteArrayCompressed?y._byteArrayCompressed.length:y._byteArray.length)),console.log("    File extension: "+(y._isCompress&&y._fileExtensionCompressed?y._fileExtensionCompressed:y._fileExtension)),console.log("    Difference: "+y._diff),y._outputData=y._encoders[y._version].encode(t,e,y._isCompress&&y._byteArrayCompressed?y._byteArrayCompressed:y._byteArray,y._isCompress&&y._fileExtensionCompressed?y._fileExtensionCompressed:y._fileExtension,y._diff),y._outputCanvas.width=y._width,y._outputCanvas.height=y._height;var r=new ImageData(y._outputData,y._width,y._height);y._outputCanvas.getContext("2d").putImageData(r,0,0),y._isOutputCanvasCleared=!1,console.log("Encoding finished")})),w(y,"convertGray",(function(t){for(var e=t.data,r=0;r<e.length;r+=4){var n=.299*e[r]+.587*e[r+1]+.114*e[r+2];e[r]=n,e[r+1]=n,e[r+2]=n}})),w(y,"adjustInnerContrast",(function(t){y._innerContrast=t,y._innerImageData&&(y.adjustImageData(y._innerCanvas,y._innerImageData,t,y._innerLuminance),y._isAddMark&&y.addMark(y._innerCanvas,y._markImage))})),w(y,"adjustCoverContrast",(function(t){y._coverContrast=t,y._coverImageData&&(y.adjustImageData(y._coverCanvas,y._coverImageData,t,y._coverLuminance),y._isAddMark&&y.addMark(y._coverCanvas,y._markImage))})),w(y,"adjustInnerLuminance",(function(t){y._innerLuminance=t,y._innerImageData&&(y.adjustImageData(y._innerCanvas,y._innerImageData,y._innerContrast,t),y._isAddMark&&y.addMark(y._innerCanvas,y._markImage))})),w(y,"adjustCoverLuminance",(function(t){y._coverLuminance=t,y._coverImageData&&(y.adjustImageData(y._coverCanvas,y._coverImageData,y._coverContrast,t),y._isAddMark&&y.addMark(y._coverCanvas,y._markImage))})),w(y,"saveOutputImage",(function(){if(!y._outputData)throw new Error("请先处理图像！");var t=(new Date).getTime(),r=document.createElement("a"),n=e.getBlobFromImageData(new ImageData(y._outputData,y._width,y._height));r.href=URL.createObjectURL(n),r.download="encoded_".concat(t,".png"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)})),w(y,"updateMarkImage",(function(t){y._markImage=t})),w(y,"setIsAddMark",(function(t){y._isAddMark=t,y._markImage&&(t?(y._innerImageData&&y.addMark(y._innerCanvas,y._markImage),y._coverImageData&&y.addMark(y._coverCanvas,y._markImage)):(y._innerImageData&&y.adjustImageData(y._innerCanvas,y._innerImageData,y._innerContrast,y._innerLuminance),y._coverImageData&&y.adjustImageData(y._coverCanvas,y._coverImageData,y._coverContrast,y._coverLuminance)))})),w(y,"setMirageSize",(function(t){y._mirageSize=t,y._innerImage&&y.updateInnerImage(y._innerImage)})),w(y,"setDiff",(function(t){y._diff=t,0===y._version&&y._byteArray&&y._innerImage&&y.updateInnerImage(y._innerImage)})),w(y,"setVersion",(function(t){y._version=t,y._byteArray&&y._innerImage&&y.updateInnerImage(y._innerImage)})),w(y,"setIsCompress",function(){var t=f(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y._isCompress=e,y._byteArray&&y._innerImage&&y.updateInnerImage(y._innerImage);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),w(y,"clearOutputCanvas",(function(){y._isOutputCanvasCleared||(y.clearCanvas(y._outputCanvas),y._isOutputCanvasCleared=!0,y._outputData=null)})),y._innerImage=null,y._coverImage=null,y._innerImageData=null,y._coverImageData=null,y._innerContrast=t.contrast_inner,y._coverContrast=t.contrast_cover,y._innerLuminance=t.luminance_inner,y._coverLuminance=t.luminance_cover,y._mirageSize=t.mirage_size,y._isCompress=t.encode_compress,y._compressQuality=t.encode_compress_quality,y._version=t.version,y._hiddenFile=null,y._fileExtension="",y._fileExtensionCompressed="",y._byteArray=null,y._byteArrayCompressed=null,y._outputData=null,y._innerCanvas=document.getElementById(a),y._coverCanvas=document.getElementById(c),y._hiddenCanvas=document.getElementById(l),y._outputCanvas=document.getElementById(d),y._sizeLabel=document.getElementById(p),y._hiddenSizeLabel=document.getElementById(v),y._isAddMark=t.add_mark,y._markImage=null,y._markRatio=t.mark_ratio,y._encoders=[new s(t),new i(t),new o(t)],y}return m(n,t),p(n,[{key:"updateCoverImage",value:function(t){if(this._coverImage=t,this._innerImage){var e,r,n,i,o=t.width/t.height;o<this._width/this._height?(e=0,r=Math.ceil((this._height-this._width/o)/2),n=this._width,i=Math.ceil(this._width/o)):(e=Math.ceil((this._width-this._height*o)/2),r=0,n=Math.ceil(this._height*o),i=this._height),this._coverCanvas.width=this._width,this._coverCanvas.height=this._height;var a=this._coverCanvas.getContext("2d");a.drawImage(t,e,r,n,i),this._coverImageData=a.getImageData(0,0,this._width,this._height)}else{this._coverCanvas.width=t.width,this._coverCanvas.height=t.height;var s=this._coverCanvas.getContext("2d");s.drawImage(t,0,0),this._coverImageData=s.getImageData(0,0,t.width,t.height)}this.convertGray(this._coverImageData),this.adjustImageData(this._coverCanvas,this._coverImageData,this._coverContrast,this._coverLuminance),this._isAddMark&&this.addMark(this._coverCanvas,this._markImage)}},{key:"addMark",value:function(t,e){if(e){var r=t.width*this._markRatio,n=t.height*this._markRatio,i=r/n,o=e.width/e.height;i>o?r=n*o:n=r/o,t.getContext("2d").drawImage(e,0,0,r,n)}}}])}(t),i=function(){return p((function t(e){var r=this;h(this,t),w(this,"_getBits",(function(t){var e=t%3,n=Math.floor(t/3);return 0===n?r._getBitsFromByte(r._version,e):1===n?r._getBitsFromByte(Math.floor(r._diff/2),e):n<=5?r._getBitsFromByte(r._targetSize>>(n-2<<3)&255,e):n<r._remained?n-6<r._fileExtension.length?r._getBitsFromByte(r._fileExtension.charCodeAt(n-6),e):r._getBitsFromByte(0,e):n<r._targetSize+r._remained?r._getBitsFromByte(r._byteArray[n-r._remained],e):r._getRandomBits()})),w(this,"_scale",(function(t,e,r){return Math.floor(t*e+r)})),w(this,"_isInner",(function(t){return(t%r._width+Math.floor(t/r._width))%2==0})),w(this,"_getBitsFromByte",(function(t,e){var n=t>>3*e,i=1&n,o=n>>1&1;return 2!=e?{r:i,g:o,b:n>>2&1}:{r:i,g:o,b:r._calParityBit(t)}})),w(this,"_getRandomBits",(function(){return{r:Math.random()>.5?1:0,g:Math.random()>.5?1:0,b:Math.random()>.5?1:0}})),w(this,"_calParityBit",(function(t){for(var e=0,r=0;r<8;r++)e^=t>>r&1;return e})),this._version=1,this._globalDefaultDiff=e.default_difference,this._defaultDiff=e.version_1.default_difference,this._remained=e.version_1.remained,this._padding=e.version_1.padding,this._scale_i=e.version_1.scale_inner,this._offset_i=e.version_1.offset_inner,this._scale_c=e.version_1.scale_cover,this._offset_c=e.version_1.offset_cover}),[{key:"encode",value:function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(this._innerData=t.data,this._coverData=e.data,this._width=t.width,this._height=t.height,this._pixelRange=1===o?this._innerData.length>>2:3,1===o&&this._pixelRange<this.getRequiredLength(r))throw new Error("可用像素过少，编码空间不足！");this._version=o;var a=new Uint8ClampedArray(this._innerData.length);this._byteArray=r,this._targetSize=this._byteArray.length,this._fileExtension=n,this._diff=i||this._defaultDiff;for(var s=0;s<this._pixelRange;s++){var c=s<3?this._globalDefaultDiff:s<6?this._defaultDiff:this._diff;if(this._isInner(s)){var u=this._scale(this._innerData[4*s],this._scale_i,this._offset_i),l=this._getBits(s),f=l.r,h=l.g,d=l.b;a[4*s]=f?255-c:255,a[4*s+1]=h?255-c:255,a[4*s+2]=d?255-c:255,a[4*s+3]=u}else{var p=this._scale(this._coverData[4*s],this._scale_c,this._offset_c),g=this._getBits(s),v=g.r,y=g.g,m=g.b;a[4*s]=v?c:0,a[4*s+1]=y?c:0,a[4*s+2]=m?c:0,a[4*s+3]=255-p}}return a}},{key:"getRequiredLength",value:function(t){return 3*(t.length+this._remained+this._padding)}}])}(),o=function(t){function e(t){var r;return h(this,e),w(r=g(this,e,[t]),"_getBitsPair",(function(t){var e=t%3,n=Math.floor(t/3);return n<2?r._getBitsFromBytePair(Math.floor(r._diff/6),e):n<4?r._getBitsFromBytePair(r._targetSize>>(n-2<<4)&65535,e):n<r._remained?n-4<r._fileExtension.length?r._getBitsFromBytePair(r._fileExtension.charCodeAt(n-4),e):r._getBitsFromByte(0,e):n<Math.ceil(r._targetSize/2)+r._remained?r._getBitsFromBytePair(r._byteArray[n-r._remained<<1]|r._byteArray[1+(n-r._remained<<1)]<<8,e):r._getRandomBits()})),w(r,"_getBitsFromBytePair",(function(t,e){var n=t>>6*e,i=3&n,o=n>>2&3;return 2!=e?{r:i,g:o,b:n>>4&3}:{r:i,g:o,b:r._calParityBitPair(t)}})),w(r,"_calParityBitPair",(function(t){for(var e=0,r=0;r<8;r++)e^=t>>r&1;for(var n=8;n<16;n++)e^=(t>>n&1)<<1;return e})),w(r,"_getRandomBits",(function(){return{r:Math.floor(4*Math.random()),g:Math.floor(4*Math.random()),b:Math.floor(4*Math.random())}})),r._version=2,r._defaultDiff=t.version_2.default_difference,r._remained=t.version_2.remained,r._padding=t.version_2.padding,r._scale_i=t.version_2.scale_inner,r._offset_i=t.version_2.offset_inner,r._scale_c=t.version_2.scale_cover,r._offset_c=t.version_2.offset_cover,r}return m(e,t),p(e,[{key:"getRequiredLength",value:function(t){return 3*(t.length>>1+this._remained+this._padding)}},{key:"encode",value:function(t,r,n,i,o){var a=function(t,e,r){var n=c(y(t.prototype),"encode",r);return function(t){return n.apply(r,t)}}(e,0,this)([t,r,n,i,void 0,this._version]);if(this._diff=o,this._pixelRange=t.data.length>>2,this._pixelRange<this.getRequiredLength(n))throw new Error("可用像素过少，编码空间不足！");if(1&this._targetSize){var s=new Uint8Array(this._targetSize+1);s.set(this._byteArray),s[this._targetSize]=0,this._byteArray=s}for(var u=3;u<this._pixelRange;u++){var l=Math.floor((u<6?this._defaultDiff:this._diff)/3);if(this._isInner(u)){var f=this._scale(this._innerData[4*u],this._scale_i,this._offset_i),h=this._getBitsPair(u),d=h.r,p=h.g,g=h.b;a[4*u]=255-l*d,a[4*u+1]=255-l*p,a[4*u+2]=255-l*g,a[4*u+3]=f}else{var v=this._scale(this._coverData[4*u],this._scale_c,this._offset_c),m=this._getBitsPair(u),_=m.r,w=m.g,b=m.b;a[4*u]=l*_,a[4*u+1]=l*w,a[4*u+2]=l*b,a[4*u+3]=255-v}}return a}}])}(i),s=p((function e(r){var n=this;h(this,e),w(this,"encode",(function(e,r,i,o,s){var c,u,l,f=e.data,h=r.data,d=e.width,p=f.length>>2;n._targetSize=i.length,n._compress=n._calCompress(s||n._defaultDiff);var g=new Uint8ClampedArray(f.length);if(g[0]=248,g[1]=251,g[2]=248|n._compress,g[3]=n._scaleInner(f[0]),n._byteArray=[],(c=n._byteArray).push.apply(c,a(n._targetSize.toString().split("").map((function(t){return t.charCodeAt(0)})))),n._byteArray.push(1),(u=n._byteArray).push.apply(u,a(("mtc."+o).split("").map((function(t){return t.charCodeAt(0)})))),n._byteArray.push(1),(l=n._byteArray).push.apply(l,a(t.classifyFileType(o).split("").map((function(t){return t.charCodeAt(0)})))),n._byteArray.push(0),n._fileArray=i,n._byteArray.length>n._padding)throw new Error("头部信息过长！可尝试更改文件拓展名。");n._bytePos=0,n._buffer=0,n._bufferSize=0;for(var v=255&~((1<<n._compress)-1),y=1;y<p;y++){var m=(y%d+Math.floor(y/d))%2==0;g[4*y]=m?v|n._popBits():n._popBits(),g[4*y+1]=m?v|n._popBits():n._popBits(),g[4*y+2]=m?v|n._popBits():n._popBits(),g[4*y+3]=m?n._scaleInner(f[4*y]):255-n._scaleCover(h[4*y])}if(n._bytePos<n._byteArray.length+n._targetSize)throw new Error("可用像素过少，编码空间不足！");return g})),w(this,"getRequiredLength",(function(t,e){var r=n._calCompress(e);return Math.ceil((n._padding+t.length<<3)/r/3)+1})),w(this,"_calCompress",(function(t){return Math.min(Math.max(Math.floor(t/10),1),7)})),w(this,"_pushByte",(function(){var t=n._bytePos<n._byteArray.length?n._byteArray[n._bytePos]:n._bytePos<n._byteArray.length+n._targetSize?n._fileArray[n._bytePos-n._byteArray.length]:Math.floor(256*Math.random());n._bytePos++,n._buffer=n._buffer<<8|t,n._bufferSize+=8})),w(this,"_popBits",(function(){n._bufferSize<n._compress&&n._pushByte();var t=(n._buffer&(1<<n._compress)-1<<n._bufferSize-n._compress)>>n._bufferSize-n._compress;return n._bufferSize-=n._compress,n._buffer&=(1<<n._bufferSize)-1,t})),w(this,"_scaleInner",(function(t){return Math.floor(t*n._scale_i+n._offset_i)})),w(this,"_scaleCover",(function(t){return Math.floor(t*n._scale_c+n._offset_c)})),this._defaultDiff=r.version_0.default_difference,this._padding=r.version_0.padding,this._scale_i=r.version_0.scale_inner,this._offset_i=r.version_0.offset_inner,this._scale_c=r.version_0.scale_cover,this._offset_c=r.version_0.offset_cover}));return n},void 0===(o=n.apply(e,i))||(t.exports=o),errorHandling.scriptsLoaded.CloakEncoder=!0},103:function(t,e){var r,n;function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}"undefined"!=typeof self&&self,r=function(){var t,e,r,n={html:"text/html",css:"text/css",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp",webp:"image/webp",mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",mp4:"video/mp4",webm:"video/webm",flv:"video/x-flv",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",txt:"text/plain"},a=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"showResult",value:function(t,e,r){var n=this;switch(r){case"png":case"jpg":case"jpeg":case"bmp":case"webp":var i=new Image;i.onload=function(){n.clearCanvas(t),t.width=i.width,t.height=i.height,t.getContext("2d").drawImage(i,0,0)},i.src=e;default:r?this.showTextOnCanvas(t,"暂不支持预览此文件","文件拓展名: "+r):this.showTextOnCanvas(t,"暂不支持预览此文件")}}},{key:"showTextOnCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"暂不支持预览此文件",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.clearCanvas(t);var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.font="15px Microsoft Yahei",n.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--front-color"),n.textAlign="center",r?(n.fillText(e,t.width/2,t.height/2-10),n.fillText(r,t.width/2,t.height/2+10)):n.fillText(e,t.width/2,t.height/2)}},{key:"cloneImageData",value:function(t){var e=new ImageData(new Uint8ClampedArray(t.data),t.width,t.height);return console.log(e),console.log(e.data),console.log(t.data),e}},{key:"truncate",value:function(t){return Math.min(255,Math.max(0,t))}},{key:"adjustImageData",value:function(t,e,r,n){for(var i=new Uint8ClampedArray(e.data.length),o=e.data,a=259*(255+(r=5.1*(r-50)))/(255*(259-r)),s=3*n-150,c=0;c<i.length;c+=4)i[c]=this.truncate(a*(o[c]-128)+128+s),i[c+1]=this.truncate(a*(o[c+1]-128)+128+s),i[c+2]=this.truncate(a*(o[c+2]-128)+128+s),i[c+3]=255;var u=new ImageData(i,e.width,e.height);t.width=u.width,t.height=u.height,t.getContext("2d").putImageData(u,0,0)}},{key:"saveResultFromUrl",value:function(t,e){var r=(new Date).getTime(),n=document.createElement("a");n.href=t,n.download="decoded_".concat(r,".").concat(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"clearCanvas",value:function(t){t.width=300,t.height=150,t.getContext("2d").clearRect(0,0,t.width,t.height)}},{key:"getImageDataFromImage",value:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");return r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height)}}],e&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();return t=a,r=function(t){return n.hasOwnProperty(t)?n[t]:"application/octet-stream"},(e=o(e="classifyFileType"))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,a},void 0===(n=r.apply(e,[]))||(t.exports=n),errorHandling.scriptsLoaded.CloakUniversal=!0},526:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=s(t),a=o[0],c=o[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),l=0,f=c>0?a-4:a;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(c(t,s,s+a>u?u:s+a));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(t,e,r)=>{"use strict";const n=r(526),i=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|g(t,e);let n=s(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||X(t.length)?s(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return l(t),s(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(i)return n?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return A(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:_(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,r,n,i){let o,a=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){let n=-1;for(o=r;o<s;o++)if(u(t,o)===u(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(t,o+n)!==u(e,n)){r=!1;break}if(r)return o}return-1}function w(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(X(n))return a;t[r+a]=n}return a}function b(t,e,r,n){return K($(e,t.length-r),t,r,n)}function k(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return K(V(e),t,r,n)}function x(t,e,r,n){return K(function(t,e){let r,n,i;const o=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function I(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,a=e>239?4:e>223?3:e>191?2:1;if(i+a<=r){let r,n,s,c;switch(a){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(o=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=t[i+1],n=t[i+2],s=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(t){const e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=L));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},c.allocUnsafe=function(t){return f(t)},c.allocUnsafeSlow=function(t){return f(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(q(e,Uint8Array))i+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):v.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.IS;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const s=Math.min(o,a),u=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<s;++t)if(u[t]!==l[t]){o=u[t],a=l[t];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function B(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function A(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=J[t[n]];return i}function O(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function T(t,e,r,n,i){G(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function j(t,e,r,n,i){G(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function D(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,o){return e=+e,r>>>=0,o||D(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function z(t,e,r,n,o){return e=+e,r>>>=0,o||D(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||W(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||W(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||W(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||W(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||U(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||U(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return T(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);U(this,t,e,r,n-1,-n)}let i=0,o=1,a=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/o|0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);U(this,t,e,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/o|0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return T(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return z(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return z(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=c.isBuffer(t)?t:c.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%a]}return this};const N={};function M(t,e,r){N[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function G(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||W(e,t.length-(r+1))}(n,i,o)}function H(t,e){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function $(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function X(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},251:(t,e)=>{e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,u=c>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+d]=255&a,d+=p,a/=256,u-=8);t[r+d-p]|=128*g}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r(248)})();
//# sourceMappingURL=packed.js.map